import{m as F,T as O,d as _,o as g,b as d,u as s,Z as q,w as y,a as e,h as v,e as C,s as r,B as E,f as b,t as x,v as i,F as V,g as R,i as $}from"./app-rFp3DUWb.js";import{_ as D}from"./AppLayout-Cy2iqO0z.js";/* empty css                    */import{_ as c}from"./InputError-9SBn0qWZ.js";import{c as k,a as w,b as U,d as P,e as p}from"./general-D_37hS-e.js";import{r as z}from"./TrashIcon-Dq5GWaMi.js";import{r as J}from"./PlusIcon-Hj45r85u.js";const M={class:"font-semibold text-xl text-gray-800 leading-tight"},L={class:"py-12"},G={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Z={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},H={class:"mb-8"},K=e("h3",{class:"text-lg font-semibold text-gray-900 border-b pb-2 mb-4"},"DADOS GERAIS",-1),Q={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},W={class:"md:col-span-2"},X=e("label",{class:"block text-sm font-medium text-gray-700"},"Tipo de Cliente",-1),Y={class:"mt-2 flex items-center space-x-6"},ee={class:"inline-flex items-center"},te=e("span",{class:"ml-2"},"Pessoa Física",-1),se={class:"inline-flex items-center"},oe=e("span",{class:"ml-2"},"Pessoa Jurídica",-1),ae={for:"name",class:"block text-sm font-medium text-gray-700"},le=e("span",{class:"text-red-500"},"*",-1),ne={key:0},de=e("label",{for:"trade_name",class:"block text-sm font-medium text-gray-700"},[b("Nome Fantasia "),e("span",{class:"text-red-500"},"*")],-1),re={for:"document",class:"block text-sm font-medium text-gray-700"},ie=e("span",{class:"text-red-500"},"*",-1),ce=e("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"E-mail",-1),me={class:"mb-8"},pe=e("h3",{class:"text-lg font-semibold text-gray-900 border-b pb-2 mb-4"},"CONTATOS",-1),ue={class:"space-y-4"},_e={class:"flex-grow"},ge=["for"],be=["onUpdate:modelValue","onInput","id"],fe=["onClick"],he={class:"mb-8"},xe=e("h3",{class:"text-lg font-semibold text-gray-900 border-b pb-2 mb-4"},"ENDEREÇO",-1),ye={class:"grid grid-cols-1 md:grid-cols-6 gap-6"},ve={class:"md:col-span-2"},Ce=e("label",{for:"postal_code",class:"block text-sm font-medium text-gray-700"},"CEP",-1),Ee={class:"md:col-span-4"},Ve=e("label",{for:"address_street",class:"block text-sm font-medium text-gray-700"},"Rua / Logradouro",-1),ke={class:"md:col-span-2"},we=e("label",{for:"address_number",class:"block text-sm font-medium text-gray-700"},"Número",-1),Ue={class:"md:col-span-4"},Pe=e("label",{for:"address_complement",class:"block text-sm font-medium text-gray-700"},"Complemento",-1),Ne={class:"md:col-span-3"},Se=e("label",{for:"address_neighborhood",class:"block text-sm font-medium text-gray-700"},"Bairro",-1),Te={class:"md:col-span-2"},Ie=e("label",{for:"address_city",class:"block text-sm font-medium text-gray-700"},"Cidade",-1),je={class:"md:col-span-1"},Be=e("label",{for:"address_state",class:"block text-sm font-medium text-gray-700"},"Estado",-1),Ae=e("h3",{class:"text-lg font-semibold text-gray-900 border-b pb-2 mb-4"},"OBSERVAÇÕES",-1),Fe={class:"mt-8 pt-5 border-t border-gray-200"},Oe={class:"flex justify-end space-x-3"},qe=["disabled"],Ge={__name:"Edit",props:{page:{type:Object,required:!0},client:{type:Object,required:!0}},setup(f){const n=f,u=F.useToast(),t=O({_method:"PUT",type:n.client.type,name:n.client.name,trade_name:n.client.trade_name,document:n.client.type==="fisica"?w(n.client.document):U(n.client.document),email:n.client.email,contacts:n.client.contacts&&n.client.contacts.length>0?n.client.contacts.map(l=>P(l)):[""],postal_code:k(n.client.postal_code),address_street:n.client.address_street,address_number:n.client.address_number,address_complement:n.client.address_complement,address_neighborhood:n.client.address_neighborhood,address_city:n.client.address_city,address_state:n.client.address_state,observations:n.client.observations}),N=()=>{t.contacts.push("")},S=l=>{t.contacts.length>1&&t.contacts.splice(l,1)},T=(l,o)=>{t.contacts[o]=P(l.target.value)},I=l=>{let o=p(l.target.value);o.length<=11?t.document=w(o):t.document=U(o)},j=l=>{let o=p(l.target.value);t.postal_code=k(o),t.postal_code.length===9&&B()},B=async()=>{let l=p(t.postal_code);if(l.length===8)try{const a=await(await fetch(`https://viacep.com.br/ws/${l}/json/`)).json();a.erro?u.error("CEP não encontrado.",{position:"top-right"}):(t.address_street=a.logradouro,t.address_neighborhood=a.bairro,t.address_city=a.localidade,t.address_state=a.uf,u.success("Endereço preenchido automaticamente!",{position:"top-right"}))}catch(o){console.error("Erro ao buscar CEP:",o),u.error("Erro ao consultar o serviço de CEP.",{position:"top-right"})}},A=()=>{const l={...t.data()};l.document=p(l.document),l.postal_code=p(l.postal_code),l.contacts=l.contacts.map(o=>p(o)).filter(Boolean),t.transform(()=>l).put(route("clients.update",n.client.id),{onSuccess:()=>{u.success("Cliente atualizado com sucesso!")},onError:o=>{console.error(o),u.error("Verifique os campos e tente novamente.")}})};return(l,o)=>(g(),_(V,null,[d(s(q),{title:"Editar "+f.page.singular_name},null,8,["title"]),d(D,{page:f.page},{header:y(()=>[e("h2",M," Editar Cliente: "+x(f.client.name),1)]),default:y(()=>[e("div",L,[e("div",G,[e("div",Z,[e("form",{onSubmit:v(A,["prevent"]),class:"p-6"},[e("section",H,[K,e("div",Q,[e("div",W,[X,e("div",Y,[e("label",ee,[r(e("input",{type:"radio","onUpdate:modelValue":o[0]||(o[0]=a=>s(t).type=a),value:"fisica",class:"form-radio h-4 w-4 text-indigo-600"},null,512),[[E,s(t).type]]),te]),e("label",se,[r(e("input",{type:"radio","onUpdate:modelValue":o[1]||(o[1]=a=>s(t).type=a),value:"juridica",class:"form-radio h-4 w-4 text-indigo-600"},null,512),[[E,s(t).type]]),oe])])]),e("div",null,[e("label",ae,[b(x(s(t).type==="fisica"?"Nome Completo":"Razão Social")+" ",1),le]),r(e("input",{"onUpdate:modelValue":o[2]||(o[2]=a=>s(t).name=a),type:"text",id:"name",class:"simple-input mt-1",required:""},null,512),[[i,s(t).name]]),d(c,{class:"mt-2",message:s(t).errors.name},null,8,["message"])]),s(t).type==="juridica"?(g(),_("div",ne,[de,r(e("input",{"onUpdate:modelValue":o[3]||(o[3]=a=>s(t).trade_name=a),type:"text",id:"trade_name",class:"simple-input mt-1",required:""},null,512),[[i,s(t).trade_name]]),d(c,{class:"mt-2",message:s(t).errors.trade_name},null,8,["message"])])):C("",!0),e("div",null,[e("label",re,[b(x(s(t).type==="fisica"?"CPF":"CNPJ")+" ",1),ie]),r(e("input",{"onUpdate:modelValue":o[4]||(o[4]=a=>s(t).document=a),onInput:I,type:"text",id:"document",class:"simple-input mt-1",required:""},null,544),[[i,s(t).document]]),d(c,{class:"mt-2",message:s(t).errors.document},null,8,["message"])]),e("div",null,[ce,r(e("input",{"onUpdate:modelValue":o[5]||(o[5]=a=>s(t).email=a),type:"email",id:"email",class:"simple-input mt-1"},null,512),[[i,s(t).email]]),d(c,{class:"mt-2",message:s(t).errors.email},null,8,["message"])])])]),e("section",me,[pe,e("div",ue,[(g(!0),_(V,null,R(s(t).contacts,(a,m)=>(g(),_("div",{key:m,class:"flex items-center space-x-3"},[e("div",_e,[e("label",{for:"contact-"+m,class:"sr-only"},"Contato "+x(m+1),9,ge),r(e("input",{"onUpdate:modelValue":h=>s(t).contacts[m]=h,onInput:h=>T(h,m),type:"text",id:"contact-"+m,class:"simple-input w-full",placeholder:"Telefone ou outro contato"},null,40,be),[[i,s(t).contacts[m]]])]),s(t).contacts.length>1?(g(),_("button",{key:0,onClick:v(h=>S(m),["prevent"]),type:"button",class:"text-red-500 hover:text-red-700 p-1 rounded-full bg-red-100"},[d(s(z),{class:"w-5 h-5"})],8,fe)):C("",!0)]))),128))]),e("button",{onClick:v(N,["prevent"]),type:"button",class:"mt-4 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 flex items-center text-sm"},[d(s(J),{class:"w-5 h-5 mr-1"}),b(" Adicionar Contato ")])]),e("section",he,[xe,e("div",ye,[e("div",ve,[Ce,r(e("input",{"onUpdate:modelValue":o[6]||(o[6]=a=>s(t).postal_code=a),onInput:j,type:"text",id:"postal_code",class:"simple-input mt-1"},null,544),[[i,s(t).postal_code]]),d(c,{class:"mt-2",message:s(t).errors.postal_code},null,8,["message"])]),e("div",Ee,[Ve,r(e("input",{"onUpdate:modelValue":o[7]||(o[7]=a=>s(t).address_street=a),type:"text",id:"address_street",class:"simple-input mt-1"},null,512),[[i,s(t).address_street]]),d(c,{class:"mt-2",message:s(t).errors.address_street},null,8,["message"])]),e("div",ke,[we,r(e("input",{"onUpdate:modelValue":o[8]||(o[8]=a=>s(t).address_number=a),type:"text",id:"address_number",class:"simple-input mt-1"},null,512),[[i,s(t).address_number]]),d(c,{class:"mt-2",message:s(t).errors.address_number},null,8,["message"])]),e("div",Ue,[Pe,r(e("input",{"onUpdate:modelValue":o[9]||(o[9]=a=>s(t).address_complement=a),type:"text",id:"address_complement",class:"simple-input mt-1"},null,512),[[i,s(t).address_complement]])]),e("div",Ne,[Se,r(e("input",{"onUpdate:modelValue":o[10]||(o[10]=a=>s(t).address_neighborhood=a),type:"text",id:"address_neighborhood",class:"simple-input mt-1"},null,512),[[i,s(t).address_neighborhood]]),d(c,{class:"mt-2",message:s(t).errors.address_neighborhood},null,8,["message"])]),e("div",Te,[Ie,r(e("input",{"onUpdate:modelValue":o[11]||(o[11]=a=>s(t).address_city=a),type:"text",id:"address_city",class:"simple-input mt-1"},null,512),[[i,s(t).address_city]]),d(c,{class:"mt-2",message:s(t).errors.address_city},null,8,["message"])]),e("div",je,[Be,r(e("input",{"onUpdate:modelValue":o[12]||(o[12]=a=>s(t).address_state=a),type:"text",id:"address_state",class:"simple-input mt-1",maxlength:"2"},null,512),[[i,s(t).address_state]]),d(c,{class:"mt-2",message:s(t).errors.address_state},null,8,["message"])])])]),e("section",null,[Ae,r(e("textarea",{"onUpdate:modelValue":o[13]||(o[13]=a=>s(t).observations=a),id:"observations",rows:"4",class:"simple-input mt-1",placeholder:"Informações adicionais sobre o cliente..."},null,512),[[i,s(t).observations]]),d(c,{class:"mt-2",message:s(t).errors.observations},null,8,["message"])]),e("div",Fe,[e("div",Oe,[d(s($),{href:l.route("clients.index"),class:"simple-button-neutral"},{default:y(()=>[b("Cancelar")]),_:1},8,["href"]),e("button",{type:"submit",class:"simple-button-green",disabled:s(t).processing},"Atualizar Cliente",8,qe)])])],32)])])])]),_:1},8,["page"])],64))}};export{Ge as default};
