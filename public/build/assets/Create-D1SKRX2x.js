import{m as I,T,d as p,o as u,b as n,u as t,Z as B,w as f,a as e,h,e as v,s as d,B as C,f as b,t as x,v as r,F as V,g as j,i as F}from"./app-rFp3DUWb.js";import{_ as A}from"./AppLayout-Cy2iqO0z.js";/* empty css                    */import{_ as i}from"./InputError-9SBn0qWZ.js";import{e as _,a as O,b as R,d as $,c as D}from"./general-D_37hS-e.js";import{r as q}from"./TrashIcon-Dq5GWaMi.js";import{r as J}from"./PlusIcon-Hj45r85u.js";const M=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Cadastrar Novo Cliente ",-1),L={class:"py-12"},z={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},G={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},Z={class:"mb-8"},H=e("h3",{class:"text-lg font-semibold text-gray-900 border-b pb-2 mb-4"},"DADOS GERAIS",-1),K={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Q={class:"md:col-span-2"},W=e("label",{class:"block text-sm font-medium text-gray-700"},"Tipo de Cliente",-1),X={class:"mt-2 flex items-center space-x-6"},Y={class:"inline-flex items-center"},ee=e("span",{class:"ml-2"},"Pessoa Física",-1),se={class:"inline-flex items-center"},te=e("span",{class:"ml-2"},"Pessoa Jurídica",-1),oe={for:"name",class:"block text-sm font-medium text-gray-700"},ae=e("span",{class:"text-red-500"},"*",-1),le={key:0},ne=e("label",{for:"trade_name",class:"block text-sm font-medium text-gray-700"},[b(" Nome Fantasia "),e("span",{class:"text-red-500"},"*")],-1),de={for:"document",class:"block text-sm font-medium text-gray-700"},re=e("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"E-mail",-1),ie={class:"mb-8"},me=e("h3",{class:"text-lg font-semibold text-gray-900 border-b pb-2 mb-4"},"CONTATOS",-1),ce={class:"space-y-4"},pe={class:"flex-grow"},ue=["for"],_e=["onUpdate:modelValue","onInput","id"],ge=["onClick"],be={class:"mb-8"},fe=e("h3",{class:"text-lg font-semibold text-gray-900 border-b pb-2 mb-4"},"ENDEREÇO",-1),he={class:"grid grid-cols-1 md:grid-cols-6 gap-6"},xe={class:"md:col-span-2"},ye=e("label",{for:"postal_code",class:"block text-sm font-medium text-gray-700"},"CEP",-1),ve={class:"md:col-span-4"},Ce=e("label",{for:"address_street",class:"block text-sm font-medium text-gray-700"},"Rua / Logradouro",-1),Ve={class:"md:col-span-2"},ke=e("label",{for:"address_number",class:"block text-sm font-medium text-gray-700"},"Número",-1),Ee={class:"md:col-span-4"},we=e("label",{for:"address_complement",class:"block text-sm font-medium text-gray-700"},"Complemento",-1),Ue={class:"md:col-span-3"},Ne=e("label",{for:"address_neighborhood",class:"block text-sm font-medium text-gray-700"},"Bairro",-1),Pe={class:"md:col-span-2"},Se=e("label",{for:"address_city",class:"block text-sm font-medium text-gray-700"},"Cidade",-1),Ie={class:"md:col-span-1"},Te=e("label",{for:"address_state",class:"block text-sm font-medium text-gray-700"},"Estado",-1),Be=e("h3",{class:"text-lg font-semibold text-gray-900 border-b pb-2 mb-4"},"OBSERVAÇÕES",-1),je={class:"mt-8 pt-5 border-t border-gray-200"},Fe={class:"flex justify-end space-x-3"},Ae=["disabled"],Le={__name:"Create",props:{page:{type:Object,required:!0}},setup(y){const c=I.useToast(),s=T({type:"fisica",name:"",trade_name:"",document:"",email:"",contacts:[""],postal_code:"",address_street:"",address_number:"",address_complement:"",address_neighborhood:"",address_city:"",address_state:"",observations:""}),k=()=>{s.contacts.push("")},E=l=>{s.contacts.length>1&&s.contacts.splice(l,1)},w=(l,o)=>{s.contacts[o]=$(l.target.value)},U=l=>{let o=_(l.target.value);o.length<=11?s.document=O(o):s.document=R(o)},N=l=>{let o=_(l.target.value);s.postal_code=D(o),s.postal_code.length===9&&P()},P=async()=>{let l=_(s.postal_code);if(l.length===8)try{const a=await(await fetch(`https://viacep.com.br/ws/${l}/json/`)).json();a.erro?c.error("CEP não encontrado.",{position:"top-right"}):(s.address_street=a.logradouro,s.address_neighborhood=a.bairro,s.address_city=a.localidade,s.address_state=a.uf,c.success("Endereço preenchido automaticamente!",{position:"top-right"}))}catch(o){console.error("Erro ao buscar CEP:",o),c.error("Erro ao consultar o serviço de CEP.",{position:"top-right"})}},S=()=>{const l={...s.data()};l.postal_code=_(l.postal_code),l.contacts=l.contacts.map(o=>_(o)).filter(Boolean),s.transform(()=>l).post(route("clients.store"),{onSuccess:()=>{c.success("Cliente cadastrado com sucesso!"),s.reset()},onError:o=>{console.error(o),c.error("Verifique os campos e tente novamente.")}})};return(l,o)=>(u(),p(V,null,[n(t(B),{title:"Novo "+y.page.singular_name},null,8,["title"]),n(A,{page:y.page},{header:f(()=>[M]),default:f(()=>[e("div",L,[e("div",z,[e("div",G,[e("form",{onSubmit:h(S,["prevent"]),class:"p-6"},[e("section",Z,[H,e("div",K,[e("div",Q,[W,e("div",X,[e("label",Y,[d(e("input",{type:"radio","onUpdate:modelValue":o[0]||(o[0]=a=>t(s).type=a),value:"fisica",class:"form-radio h-4 w-4 text-indigo-600"},null,512),[[C,t(s).type]]),ee]),e("label",se,[d(e("input",{type:"radio","onUpdate:modelValue":o[1]||(o[1]=a=>t(s).type=a),value:"juridica",class:"form-radio h-4 w-4 text-indigo-600"},null,512),[[C,t(s).type]]),te])])]),e("div",null,[e("label",oe,[b(x(t(s).type==="fisica"?"Nome Completo":"Razão Social")+" ",1),ae]),d(e("input",{"onUpdate:modelValue":o[2]||(o[2]=a=>t(s).name=a),type:"text",id:"name",class:"simple-input mt-1",required:""},null,512),[[r,t(s).name]]),n(i,{class:"mt-2",message:t(s).errors.name},null,8,["message"])]),t(s).type==="juridica"?(u(),p("div",le,[ne,d(e("input",{"onUpdate:modelValue":o[3]||(o[3]=a=>t(s).trade_name=a),type:"text",id:"trade_name",class:"simple-input mt-1",required:""},null,512),[[r,t(s).trade_name]]),n(i,{class:"mt-2",message:t(s).errors.trade_name},null,8,["message"])])):v("",!0),e("div",null,[e("label",de,x(t(s).type==="fisica"?"CPF":"CNPJ"),1),d(e("input",{"onUpdate:modelValue":o[4]||(o[4]=a=>t(s).document=a),type:"text",id:"document",onInput:U,class:"simple-input mt-1"},null,544),[[r,t(s).document]]),n(i,{class:"mt-2",message:t(s).errors.document},null,8,["message"])]),e("div",null,[re,d(e("input",{"onUpdate:modelValue":o[5]||(o[5]=a=>t(s).email=a),type:"email",id:"email",class:"simple-input mt-1"},null,512),[[r,t(s).email]]),n(i,{class:"mt-2",message:t(s).errors.email},null,8,["message"])])])]),e("section",ie,[me,e("div",ce,[(u(!0),p(V,null,j(t(s).contacts,(a,m)=>(u(),p("div",{key:m,class:"flex items-center space-x-3"},[e("div",pe,[e("label",{for:"contact-"+m,class:"sr-only"},"Contato "+x(m+1),9,ue),d(e("input",{"onUpdate:modelValue":g=>t(s).contacts[m]=g,onInput:g=>w(g,m),type:"text",id:"contact-"+m,class:"simple-input w-full",placeholder:"Telefone ou outro contato"},null,40,_e),[[r,t(s).contacts[m]]])]),t(s).contacts.length>1?(u(),p("button",{key:0,onClick:h(g=>E(m),["prevent"]),type:"button",class:"text-red-500 hover:text-red-700 p-1 rounded-full bg-red-100"},[n(t(q),{class:"w-5 h-5"})],8,ge)):v("",!0)]))),128))]),e("button",{onClick:h(k,["prevent"]),type:"button",class:"mt-4 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 flex items-center text-sm"},[n(t(J),{class:"w-5 h-5 mr-1"}),b(" Adicionar Contato ")])]),e("section",be,[fe,e("div",he,[e("div",xe,[ye,d(e("input",{"onUpdate:modelValue":o[6]||(o[6]=a=>t(s).postal_code=a),onInput:N,type:"text",id:"postal_code",class:"simple-input mt-1"},null,544),[[r,t(s).postal_code]]),n(i,{class:"mt-2",message:t(s).errors.postal_code},null,8,["message"])]),e("div",ve,[Ce,d(e("input",{"onUpdate:modelValue":o[7]||(o[7]=a=>t(s).address_street=a),type:"text",id:"address_street",class:"simple-input mt-1"},null,512),[[r,t(s).address_street]]),n(i,{class:"mt-2",message:t(s).errors.address_street},null,8,["message"])]),e("div",Ve,[ke,d(e("input",{"onUpdate:modelValue":o[8]||(o[8]=a=>t(s).address_number=a),type:"text",id:"address_number",class:"simple-input mt-1"},null,512),[[r,t(s).address_number]]),n(i,{class:"mt-2",message:t(s).errors.address_number},null,8,["message"])]),e("div",Ee,[we,d(e("input",{"onUpdate:modelValue":o[9]||(o[9]=a=>t(s).address_complement=a),type:"text",id:"address_complement",class:"simple-input mt-1"},null,512),[[r,t(s).address_complement]])]),e("div",Ue,[Ne,d(e("input",{"onUpdate:modelValue":o[10]||(o[10]=a=>t(s).address_neighborhood=a),type:"text",id:"address_neighborhood",class:"simple-input mt-1"},null,512),[[r,t(s).address_neighborhood]]),n(i,{class:"mt-2",message:t(s).errors.address_neighborhood},null,8,["message"])]),e("div",Pe,[Se,d(e("input",{"onUpdate:modelValue":o[11]||(o[11]=a=>t(s).address_city=a),type:"text",id:"address_city",class:"simple-input mt-1"},null,512),[[r,t(s).address_city]]),n(i,{class:"mt-2",message:t(s).errors.address_city},null,8,["message"])]),e("div",Ie,[Te,d(e("input",{"onUpdate:modelValue":o[12]||(o[12]=a=>t(s).address_state=a),type:"text",id:"address_state",class:"simple-input mt-1",maxlength:"2"},null,512),[[r,t(s).address_state]]),n(i,{class:"mt-2",message:t(s).errors.address_state},null,8,["message"])])])]),e("section",null,[Be,d(e("textarea",{"onUpdate:modelValue":o[13]||(o[13]=a=>t(s).observations=a),id:"observations",rows:"4",class:"simple-input mt-1",placeholder:"Informações adicionais sobre o cliente..."},null,512),[[r,t(s).observations]]),n(i,{class:"mt-2",message:t(s).errors.observations},null,8,["message"])]),e("div",je,[e("div",Fe,[n(t(F),{href:l.route("clients.index"),class:"simple-button-neutral"},{default:f(()=>[b("Cancelar")]),_:1},8,["href"]),e("button",{type:"submit",class:"simple-button-green",disabled:t(s).processing},"Salvar Cliente",8,Ae)])])],32)])])])]),_:1},8,["page"])],64))}};export{Le as default};
