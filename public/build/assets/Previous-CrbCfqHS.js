import{T as M,d as k,y as U,x as V,l as Z,p as G,e as i,o as a,b as _,u as p,Z as H,w as C,a as e,q as J,v as K,f as d,F as y,h as P,t as s,g as v,n as T,j as Q}from"./app-BFxaF4G7.js";import{_ as W}from"./AppLayout-CJldedpQ.js";import{_ as X}from"./CreateUpdatePayModal-C-nfS-jT.js";import{_ as Y}from"./ExtraOptionsButton-D5-BUO_U.js";import{f as h,t as ee}from"./general-ILD4i3rA.js";import{r as te}from"./MagnifyingGlassIcon-CI_tOXrM.js";import{r as se}from"./EyeIcon-Eb6tf8ej.js";import{r as oe}from"./ArrowUturnLeftIcon-CQTtVK5Y.js";import"./CreateUpdateModal-BJ2MGO-9.js";import"./Modal-AoLap7Zs.js";import"./PrimaryButton-CWfdoqT9.js";import"./SecondaryButton-DRAXVd-X.js";import"./XMarkIcon-Bu3932Y3.js";import"./PlusIcon-MJV1_ixn.js";import"./PrinterIcon-DxrN6vNb.js";const ie={class:"flex items-center justify-between"},ae=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Serviços Concluídos ",-1),ne=e("span",null,"Voltar para Serviços",-1),re={class:"pt-12 print:hidden print:pt-0"},le={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 print:w-full"},de={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-5"},ce={class:"flex flex-row items-center space-x-3"},pe={class:"py-12 print:py-0"},ue={class:"max-w-7xl mx-auto print:max-w-full"},_e={class:"w-full flex justify-end pb-3 print:hidden"},he={class:"px-0 print:px-0"},xe={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg print:shadow-none"},me={class:"flex flex-col"},ve={class:"overflow-x-auto sm:-mx-6 lg:-mx-8"},fe={class:"inline-block min-w-full py-2 sm:px-6 lg:px-8"},ye={class:"overflow-hidden"},ge={class:"min-w-full text-left text-sm font-light"},we={class:"border-b font-medium"},be=e("th",{scope:"col",class:"px-6 py-4 print:px-3 print:py-2 text-center"}," #",-1),ke=e("th",{scope:"col",class:"px-6 py-4 print:px-3 print:py-2 text-center"}," Título ",-1),Ce=e("th",{scope:"col",class:"px-6 py-4 print:px-3 print:py-2 text-center"}," Cliente ",-1),je=e("th",{scope:"col",class:"px-6 py-4 print:px-3 print:py-2 text-center"}," Valor total",-1),Se=e("th",{scope:"col",class:"px-6 py-4 print:px-3 print:py-2 text-center print:hidden"}," Entregue ou Cancelado em ",-1),$e=e("th",{scope:"col",class:"px-6 py-4 print:px-3 print:py-2 text-center"}," Status ",-1),Ne=e("th",{scope:"col",class:"px-6 py-4 print:px-3 print:py-2 text-center print:hidden"}," Ações ",-1),De={key:0,scope:"col",class:"px-6 py-4 print:px-3 print:py-2 text-center print:hidden"},Me={key:1,scope:"col",class:"px-6 py-4 print:px-3 print:py-2 text-center print:hidden"},Ve={key:2,scope:"col",class:"px-6 py-4 print:px-3 print:py-2 text-center print:hidden"},Pe={key:3,scope:"col",class:"px-6 py-4 print:px-3 print:py-2 text-center print:hidden"},Te={class:"whitespace-nowrap py-4 text-center font-medium"},Ae={class:"whitespace-normal px-6 py-4 text-center trim"},Be=["title"],Ee={class:"whitespace-normal px-6 py-4 text-center"},Fe={class:"whitespace-nowrap px-2 py-4 text-center"},Oe={class:"whitespace-nowrap px-2 py-4 text-center"},ze={class:"whitespace-nowrap px-2 py-4 text-center"},Ie=["title","onClick"],qe={key:0,class:"whitespace-nowrap px-2 py-4 text-center print:hidden"},Le={key:1,class:"whitespace-nowrap px-2 py-4 text-center print:hidden"},Re={key:2,class:"whitespace-nowrap px-2 py-4 text-center print:hidden"},Ue={key:3,class:"whitespace-nowrap px-2 py-4 text-center print:hidden"},Ze={key:1,class:"transition duration-300 ease-in-out hover:bg-neutral-100 print:break-inside-avoid"},Ge=e("td",{class:"whitespace-nowrap px-6 py-4 text-center",colspan:"9"},"Não há serviços cadastrados no momento!",-1),He=[Ge],Je={class:"print:hidden flex items-center justify-between border-t border-gray-200 bg-white px-24 py-3"},Ke={class:"flex flex-1 justify-between xl:hidden"},Qe=["href","disabled"],We=["href","disabled"],Xe={class:"hidden xl:flex sm:flex-1 sm:items-center sm:justify-between"},Ye={class:"text-sm text-gray-700"},et={class:"font-medium"},tt={class:"font-medium"},st={class:"font-medium"},ot={class:"isolate inline-flex -space-x-px rounded-md shadow-xs","aria-label":"Pagination"},it=["href","disabled","onClick"],at={key:1,class:"relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-700 ring-1 ring-gray-300 ring-inset focus:outline-offset-0"},bt={__name:"Previous",props:{page:Object,page_options:{type:Array,default:null},services_list:Object,sells_list:{type:Array,default:[]},show_service_id:{type:[String,Number],default:null},filters:Object},setup(o){var $;const x=o,n=M({id:null,previous_id:null,title:"",client:"",total_value:0,partial_value:0,deadline:h(new Date(Date.now()+15*24*60*60*1e3),"new_date"),observations:"",service_status:"Não Iniciado",cancellation_reason:null,delay_reason:"",delayed:!1,completion_date:h(new Date,"new_date"),records_list:{enable_records:!1,data:[]}}),f=k((($=x.filters)==null?void 0:$.search)||"");let g=null;U(f,c=>{g&&clearTimeout(g),g=setTimeout(()=>{V.get(route("services.previous"),{search:c},{preserveState:!0,replace:!0})},300)});const l=k(!1),j=Z(()=>x.services_list.data),m=k({mode:"see",show:!1,get title(){switch(this.mode){case"see":return"Ver informações do serviço";default:return"Detalhes do Serviço"}},get primary_button_txt(){switch(this.mode){case"see":return"Fechar";default:return"Ok"}}}),A=c=>{const r=x.services_list.data.find(t=>t.id===parseInt(c));if(r){const{id:t,previous_id:u,motive:b,entity_name:E,deadline:F,observations:O,cancellation_reason:z,delay_reason:I,delayed:q,completion_date:nt,records:N,accounting:D,status:L}=r;n.id=t,n.previous_id=u,n.title=b,n.client=E,n.total_value=D.total_value,n.partial_value=D.partial_value,n.deadline=F,n.observations=O,n.service_status=L,n.cancellation_reason=z,n.delay_reason=I,n.completion_date=h(new Date,"new_date"),n.delayed=q,n.records_list.enable_records=!!N.length,n.records_list.data=N.map(R=>M(R))}},S=(c,r=null)=>{r!==null&&A(r),m.value.mode=c,m.value.show=!0},B=()=>{n.reset(),m.value.show=!1};G(()=>{x.show_service_id&&S("see",x.show_service_id)});const w=c=>{c&&V.get(c,{search:f.value},{preserveState:!0,preserveScroll:!0})};return(c,r)=>(a(),i(y,null,[_(p(H),{title:o.page.name},null,8,["title"]),_(W,{page:o.page,page_options:o.page_options},{header:C(()=>[e("div",ie,[ae,_(p(Q),{href:c.route("services.index"),class:"text-gray-600 hover:text-gray-900 flex items-center space-x-2"},{default:C(()=>[_(p(oe),{class:"w-4 h-4"}),ne]),_:1},8,["href"])])]),default:C(()=>[e("div",re,[e("div",le,[e("div",de,[e("div",ce,[_(p(te),{class:"w-5 y-5"}),J(e("input",{type:"text",name:"search_term",id:"search_term",autocomplete:"on",class:"simple-input",autofocus:"true",placeholder:"Pesquisar termo...","onUpdate:modelValue":r[0]||(r[0]=t=>f.value=t)},null,512),[[K,f.value]])])])])]),e("div",pe,[e("div",ue,[e("div",_e,[l.value?d("",!0):(a(),i("button",{key:0,class:"text-blue-500 text-xs justify-end",onClick:r[1]||(r[1]=t=>l.value=!l.value)},"Mostrar dados de usuário")),l.value?(a(),i("button",{key:1,class:"text-red-500 text-xs justify-end",onClick:r[2]||(r[2]=t=>l.value=!l.value)},"Esconder dados de usuário")):d("",!0)]),e("div",he,[e("div",xe,[e("div",me,[e("div",ve,[e("div",fe,[e("div",ye,[e("table",ge,[e("thead",we,[e("tr",null,[be,ke,Ce,je,Se,$e,Ne,l.value?(a(),i("th",De,"Criado em")):d("",!0),l.value?(a(),i("th",Me,"Criado por")):d("",!0),l.value?(a(),i("th",Ve," Modificado em")):d("",!0),l.value?(a(),i("th",Pe," Modificado por ")):d("",!0)])]),e("tbody",null,[j.value.length?(a(!0),i(y,{key:0},P(j.value,t=>{var u;return a(),i("tr",{key:t.id,class:"border-b transition duration-300 ease-in-out hover:bg-neutral-100 print:break-inside-avoid"},[e("td",Te,s(t.id),1),e("td",Ae,[v(s(t.motive)+" ",1),t.observations?(a(),i("span",{key:0,title:t.observations,class:"inline-flex items-center rounded-md bg-gray-50 px-2 py-1 text-xs font-medium text-gray-600 ring-1 ring-inset ring-gray-500/10 cursor-help"},"OBS",8,Be)):d("",!0)]),e("td",Ee,s(t.entity_name),1),e("td",Fe,s(p(ee)(t.accounting.total_value)),1),e("td",Oe,s(p(h)(t.completion_date||t.deleted_at,"read")),1),e("td",ze,[e("label",{class:T({"text-blue-500":t.service_status==="Não Iniciado","text-yellow-500":t.service_status==="Em Andamento","text-orange-500":t.service_status==="Pausado","text-green-500":t.service_status==="Finalizado","text-red-500":t.service_status==="Cancelado"})},s(t.service_status),3)]),e("td",{class:"whitespace-nowrap px-4 py-4 text-center cursor-pointer hover:text-green-700 active:text-green-900 select-none print:hidden",title:"VER: "+t.motive+"("+t.entity_name+")",onClick:b=>S("see",t.id)},[_(p(se),{class:"w-4 h-4 m-auto"})],8,Ie),l.value?(a(),i("td",qe,s(p(h)(t.created_at,"reading_date_time")),1)):d("",!0),l.value?(a(),i("td",Le,s(t.procedures[0].user.name),1)):d("",!0),l.value?(a(),i("td",Re,s(p(h)(t.updated_at,"reading_date_time")),1)):d("",!0),l.value?(a(),i("td",Ue,s(t.procedures[((u=t.procedures)==null?void 0:u.length)-1].user.name),1)):d("",!0)])}),128)):(a(),i("tr",Ze,He))])])])])])])])])])]),e("div",Je,[e("div",Ke,[e("button",{href:o.services_list.prev_page_url,disabled:!o.services_list.prev_page_url,onClick:r[3]||(r[3]=t=>w(o.services_list.prev_page_url)),class:"relative inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50"},"Anterior",8,Qe),e("button",{href:o.services_list.next_page_url,disabled:!o.services_list.next_page_url,onClick:r[4]||(r[4]=t=>w(o.services_list.next_page_url)),class:"relative ml-3 inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50"},"Próximo",8,We)]),e("div",Xe,[e("div",null,[e("p",Ye,[v(" Mostrando "+s(" ")+" "),e("span",et,s(o.services_list.from),1),v(" "+s(" ")+" à "+s(" ")+" "),e("span",tt,s(o.services_list.to),1),v(" "+s(" ")+" de "+s(" ")+" "),e("span",st,s(o.services_list.total),1),v(" "+s(" ")+" registros ")])]),e("div",null,[e("nav",ot,[(a(!0),i(y,null,P(o.services_list.links,(t,u)=>(a(),i(y,null,[t.url&&!["« Previous","Next »"].includes(t.label)?(a(),i("button",{key:u,href:t.url,disabled:!t.url,onClick:b=>w(t.url),"aria-current":"page",class:T(["relative inline-flex items-center px-4 py-2 text-sm font-semibold focus:z-20 focus-visible:outline-2 focus-visible:outline-offset-2",{"z-10 bg-green-600 text-white focus-visible:outline-green-600":t.active,"text-gray-900 ring-1 ring-gray-300 ring-inset hover:bg-gray-50 focus:outline-offset-0":!t.active,"rounded-r-md":u===o.services_list.links.length-1&&!t.active&&o.services_list.links[o.services_list.links.length-1].label!=="Next »","rounded-l-md":u===0&&!t.active&&o.services_list.links[0].label!=="« Previous"}])},s(t.label),11,it)):!t.url&&t.label==="..."?(a(),i("span",at,"...")):d("",!0)],64))),256))])])])]),_(X,{show:m.value.show,modal:m.value,service:p(n),sells_list:o.sells_list,onClose:B},null,8,["show","modal","service","sells_list"]),_(Y,{mode:["rollup","print_page"]})]),_:1},8,["page","page_options"])],64))}};export{bt as default};
