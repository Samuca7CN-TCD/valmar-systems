import{T as M,r as w,p as F,y as V,k as U,d as a,o,b as m,u,Z as q,w as k,a as e,s as L,v as R,e as l,F as v,g as N,t as i,f as x,n as Z,i as G}from"./app-CvAlCVsm.js";import{_ as H}from"./AppLayout-PcgpBm_n.js";import{_ as I}from"./CreateUpdatePayModal-DxTW0vLL.js";import{_ as J}from"./ExtraOptionsButton-Ds1H9kCD.js";import{t as K,f as T}from"./general-D_37hS-e.js";import{r as Q}from"./MagnifyingGlassIcon-DHls4Nc_.js";import{r as W}from"./EyeIcon-Be-mZmg-.js";import{r as X}from"./ArrowUturnLeftIcon-WVUVnj65.js";import"./CreateUpdateModal-BQ3IFhSt.js";import"./Modal-BTcRdpT-.js";import"./PrimaryButton-CMcNbFER.js";import"./SecondaryButton-DmFe0qdl.js";import"./ClientSelector-D2BBdkmY.js";import"./lodash-BFq6OCGj.js";import"./XMarkIcon-B-8YcTZB.js";import"./PlusIcon-Egh1AfEM.js";import"./PencilIcon-G-YSz9bE.js";import"./BanknotesIcon-DJ1eA1T_.js";import"./PrinterIcon-B4PmphTK.js";const Y={class:"flex items-center justify-between"},ee={class:"font-semibold text-xl text-gray-800 leading-tight"},te=e("span",null,"Voltar para Pagamentos",-1),se={class:"pt-12 print:hidden print:pt-0"},ae={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 print:w-full"},oe={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-5"},ie={class:"flex flex-row items-center space-x-3"},re={class:"py-12 print:py-0"},ne={class:"max-w-7xl mx-auto print:max-w-full"},le={class:"w-full flex justify-end pb-3 print:hidden"},de={class:"px-0 print:px-0"},ce={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg print:shadow-none"},pe={class:"flex flex-col"},ue={class:"overflow-x-auto sm:-mx-6 lg:-mx-8"},me={class:"inline-block min-w-full py-2 sm:px-6 lg:px-8"},he={class:"overflow-hidden"},_e={class:"min-w-full text-left text-sm font-light"},xe={class:"border-b font-medium"},fe=e("th",{scope:"col",class:"px-6 py-4 text-center"},"#",-1),ve=e("th",{scope:"col",class:"px-6 py-4 text-center"},"Dívida",-1),ye=e("th",{scope:"col",class:"px-6 py-4 text-center"},"Devedor",-1),ge=e("th",{scope:"col",class:"px-6 py-4 text-center"},"Valor total",-1),be=e("th",{scope:"col",class:"px-6 py-4 text-center print:hidden"},"Ações ",-1),we={key:0,scope:"col",class:"px-6 py-4 print:px-3 print:py-2 text-center print:hidden"},ke={key:1,scope:"col",class:"px-6 py-4 print:px-3 print:py-2 text-center print:hidden"},Ce={key:2,scope:"col",class:"px-6 py-4 print:px-3 print:py-2 text-center print:hidden"},Pe={key:3,scope:"col",class:"px-6 py-4 print:px-3 print:py-2 text-center print:hidden"},$e={class:"whitespace-nowrap py-4 text-center font-medium"},je={class:"whitespace-normal px-6 py-4 text-center trim"},Me=["title"],Ve={class:"whitespace-normal px-6 py-4 text-center"},Ne={class:"whitespace-nowrap px-2 py-4 text-center"},Te=["title","onClick"],Be={key:0,class:"whitespace-nowrap px-2 py-4 text-center print:hidden"},De={key:1,class:"whitespace-nowrap px-2 py-4 text-center print:hidden"},Oe={key:2,class:"whitespace-nowrap px-2 py-4 text-center print:hidden"},Se={key:3,class:"whitespace-nowrap px-2 py-4 text-center print:hidden"},ze={key:1,class:"transition duration-300 ease-in-out hover:bg-neutral-100 print:break-inside-avoid"},Ae=e("td",{class:"whitespace-nowrap px-6 py-4 text-center",colspan:"9"},"Não há pagamentos cadastrados no momento!",-1),Ee=[Ae],Fe={class:"print:hidden flex items-center justify-between border-t border-gray-200 bg-white px-24 py-3"},Ue={class:"flex flex-1 justify-between xl:hidden"},qe=["href","disabled"],Le=["href","disabled"],Re={class:"hidden xl:flex sm:flex-1 sm:items-center sm:justify-between"},Ze={class:"text-sm text-gray-700"},Ge={class:"font-medium"},He={class:"font-medium"},Ie={class:"font-medium"},Je={class:"isolate inline-flex -space-x-px rounded-md shadow-xs","aria-label":"Pagination"},Ke=["href","disabled","onClick"],Qe={key:1,class:"relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-700 ring-1 ring-gray-300 ring-inset focus:outline-offset-0"},xt={__name:"Previous",props:{page:Object,page_options:{type:Array,default:null},payments_list:Object,filters:Object},setup(s){var P;const y=s,d=M({id:null,debt:"",debtor:"",total_value:0,partial_value:0,observations:"",records_list:{enable_records:!1,data:[]}}),f=w(((P=y.filters)==null?void 0:P.search)||""),r=w(!1);let g=null;F(f,c=>{g&&clearTimeout(g),g=setTimeout(()=>{V.get(route("payments.previous"),{search:c},{preserveState:!0,replace:!0})},300)});const C=U(()=>y.payments_list.data),h=w({mode:"create",show:!1,get title(){switch(this.mode){case"create":return"Criar pagamento";case"update":return"Editar pagamento";case"pay":return"Pagar pagamento";case"see":return"Ver informações do pagamento"}},get primary_button_txt(){switch(this.mode){case"create":return"Cadastrar";case"update":return"Atualizar";case"pay":return"Pagar";case"see":return"Fechar"}}}),B=(c,n=null)=>{const t=["update","pay","see"].includes(c);if(n!==null&&t){const p=y.payments_list.data.find(_=>_.id===n);if(p){const{id:_,type:O,motive:S,entity_name:z,observations:A,records:$,accounting:j}=p;d.id=_,d.type=O,d.debt=S,d.debtor=z,d.total_value=j.total_value,d.partial_value=j.partial_value,d.observations=A,d.records_list.enable_records=!!$.length,d.records_list.data=$.map(E=>M(E))}}h.value.mode=c,h.value.show=!0},D=()=>{d.reset(),h.value.show=!1},b=c=>{c&&V.get(c,{search:f.value},{preserveState:!0,preserveScroll:!0})};return(c,n)=>(o(),a(v,null,[m(u(q),{title:s.page.name},null,8,["title"]),m(H,{page:s.page,page_options:s.page_options},{header:k(()=>[e("div",Y,[e("h2",ee,i(s.page.name)+" Concluídos ",1),m(u(G),{href:c.route("payments.index"),class:"text-gray-600 hover:text-gray-900 flex items-center space-x-2"},{default:k(()=>[m(u(X),{class:"w-4 h-4"}),te]),_:1},8,["href"])])]),default:k(()=>[e("div",se,[e("div",ae,[e("div",oe,[e("div",ie,[m(u(Q),{class:"w-5 y-5"}),L(e("input",{type:"text",name:"search_term",id:"search_term",autocomplete:"on",class:"simple-input",autofocus:"true",placeholder:"Pesquisar termo...","onUpdate:modelValue":n[0]||(n[0]=t=>f.value=t)},null,512),[[R,f.value]])])])])]),e("div",re,[e("div",ne,[e("div",le,[r.value?l("",!0):(o(),a("button",{key:0,class:"text-blue-500 text-xs justify-end",onClick:n[1]||(n[1]=t=>r.value=!r.value)},"Mostrar dados de usuário")),r.value?(o(),a("button",{key:1,class:"text-red-500 text-xs justify-end",onClick:n[2]||(n[2]=t=>r.value=!r.value)},"Esconder dados de usuário")):l("",!0)]),e("div",de,[e("div",ce,[e("div",pe,[e("div",ue,[e("div",me,[e("div",he,[e("table",_e,[e("thead",xe,[e("tr",null,[fe,ve,ye,ge,be,r.value?(o(),a("th",we,"Criado em")):l("",!0),r.value?(o(),a("th",ke,"Criado por")):l("",!0),r.value?(o(),a("th",Ce," Modificado em")):l("",!0),r.value?(o(),a("th",Pe," Modificado por ")):l("",!0)])]),e("tbody",null,[C.value.length?(o(!0),a(v,{key:0},N(C.value,t=>{var p;return o(),a("tr",{key:t.id,class:"border-b transition duration-300 ease-in-out hover:bg-neutral-100 print:break-inside-avoid"},[e("td",$e,i(t.id),1),e("td",je,[x(i(t.motive)+" ",1),t.observations?(o(),a("span",{key:0,title:t.observations,class:"inline-flex items-center rounded-md bg-gray-50 px-2 py-1 text-xs font-medium text-gray-600 ring-1 ring-inset ring-gray-500/10 cursor-help"},"OBS",8,Me)):l("",!0)]),e("td",Ve,i(t.entity_name),1),e("td",Ne,i(u(K)(t.accounting.total_value)),1),e("td",{class:"whitespace-nowrap px-4 py-4 text-center cursor-pointer hover:text-green-700 active:text-green-900 select-none print:hidden",title:"VER: "+t.motive+"("+t.entity_name+")",onClick:_=>B("see",t.id)},[m(u(W),{class:"w-4 h-4 m-auto"})],8,Te),r.value?(o(),a("td",Be,i(u(T)(t.created_at,"reading_date_time")),1)):l("",!0),r.value?(o(),a("td",De,i(t.procedures[0].user.name),1)):l("",!0),r.value?(o(),a("td",Oe,i(u(T)(t.updated_at,"reading_date_time")),1)):l("",!0),r.value?(o(),a("td",Se,i(t.procedures[((p=t.procedures)==null?void 0:p.length)-1].user.name),1)):l("",!0)])}),128)):(o(),a("tr",ze,Ee))])])])])])])])])])]),e("div",Fe,[e("div",Ue,[e("button",{href:s.payments_list.prev_page_url,disabled:!s.payments_list.prev_page_url,onClick:n[3]||(n[3]=t=>b(s.payments_list.prev_page_url)),class:"relative inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50"},"Anterior",8,qe),e("button",{href:s.payments_list.next_page_url,disabled:!s.payments_list.next_page_url,onClick:n[4]||(n[4]=t=>b(s.payments_list.next_page_url)),class:"relative ml-3 inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50"},"Próximo",8,Le)]),e("div",Re,[e("div",null,[e("p",Ze,[x(" Mostrando "+i(" ")+" "),e("span",Ge,i(s.payments_list.from),1),x(" "+i(" ")+" à "+i(" ")+" "),e("span",He,i(s.payments_list.to),1),x(" "+i(" ")+" de "+i(" ")+" "),e("span",Ie,i(s.payments_list.total),1),x(" "+i(" ")+" registros ")])]),e("div",null,[e("nav",Je,[(o(!0),a(v,null,N(s.payments_list.links,(t,p)=>(o(),a(v,null,[t.url&&!["« Previous","Next »"].includes(t.label)?(o(),a("button",{key:p,href:t.url,disabled:!t.url,onClick:_=>b(t.url),"aria-current":"page",class:Z(["relative inline-flex items-center px-4 py-2 text-sm font-semibold focus:z-20 focus-visible:outline-2 focus-visible:outline-offset-2",{"z-10 bg-green-600 text-white focus-visible:outline-green-600":t.active,"text-gray-900 ring-1 ring-gray-300 ring-inset hover:bg-gray-50 focus:outline-offset-0":!t.active,"rounded-r-md":p===s.payments_list.links.length-1&&!t.active&&s.payments_list.links[s.payments_list.links.length-1].label!=="Next »","rounded-l-md":p===0&&!t.active&&s.payments_list.links[0].label!=="« Previous"}])},i(t.label),11,Ke)):!t.url&&t.label==="..."?(o(),a("span",Qe,"...")):l("",!0)],64))),256))])])])]),m(I,{show:h.value.show,modal:h.value,payment:u(d),onClose:D},null,8,["show","modal","payment"]),m(J,{mode:["rollup","print_page"]})]),_:1},8,["page","page_options"])],64))}};export{xt as default};
