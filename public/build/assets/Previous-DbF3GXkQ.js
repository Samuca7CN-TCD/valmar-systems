import{T as g,d as y,l as N,o as l,e as c,b as n,u as d,Z as P,w as b,a as e,t as p,q as S,v as T,F as C,g as $,f as O,h as A}from"./app-GSE23OBQ.js";import{_ as E}from"./AppLayout-D0XooGLR.js";import{_ as F}from"./CreateUpdatePayModal-EvMZxGmx.js";import{_ as j}from"./ExtraOptionsButton-DL8LtFc3.js";import{f as q,t as h}from"./general-f63YF4ZR.js";import{r as U}from"./MagnifyingGlassIcon-Bqet785w.js";import{r as z}from"./EyeIcon-DSXp5cey.js";import"./CreateUpdateModal-CoPdkdw9.js";import"./Modal-DVg2rk0y.js";import"./PrimaryButton-Bmz_jlAu.js";import"./SecondaryButton-B6ZrvCMw.js";import"./PlusIcon-CwGAHxrw.js";import"./XMarkIcon-B-R4M4GW.js";import"./PrinterIcon-Xhggrp_Y.js";const R={class:"font-semibold text-xl text-gray-800 leading-tight"},Z={class:"pt-12 print:hidden print:pt-0"},G={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 print:w-full"},H={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-5"},I={class:"flex flex-row items-center space-x-3"},J={class:"py-12 print:py-0"},K={class:"max-w-7xl mx-auto print:max-w-full"},Q={class:"px-0 print:px-0"},W={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg print:shadow-none"},X={class:"flex flex-col"},Y={class:"overflow-x-auto sm:-mx-6 lg:-mx-8"},ee={class:"inline-block min-w-full py-2 sm:px-6 lg:px-8"},te={class:"overflow-hidden"},se={class:"min-w-full text-left text-sm font-light"},oe=e("thead",{class:"border-b font-medium"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-4 text-center"},"#"),e("th",{scope:"col",class:"px-6 py-4 text-center"},"Título"),e("th",{scope:"col",class:"px-6 py-4 text-center"},"Cliente"),e("th",{scope:"col",class:"px-6 py-4 text-center"},"Valor total"),e("th",{scope:"col",class:"px-6 py-4 text-center print:hidden"},"Ações ")])],-1),ae={class:"border-b transition duration-300 ease-in-out hover:bg-neutral-100 print:break-inside-avoid"},ne={class:"whitespace-nowrap py-4 text-center font-medium"},re={class:"whitespace-normal px-6 py-4 text-center trim"},ie=["title"],le={class:"whitespace-normal px-6 py-4 text-center"},ce={class:"whitespace-nowrap px-2 py-4 text-center"},de=["title","onClick"],pe={key:1,class:"transition duration-300 ease-in-out hover:bg-neutral-100 print:break-inside-avoid"},ue=e("td",{class:"whitespace-nowrap px-6 py-4 text-center",colspan:"9"},"Não há serviços cadastrados no momento!",-1),me=[ue],De={__name:"Previous",props:{page:Object,page_options:{type:Array,default:null},services_list:Object},setup(r){const x=r,o=g({id:null,title:"",client:"",total_value:0,partial_value:0,observations:"",deadline:q(new Date(Date.now()+15*24*60*60*1e3),"new_date"),records_list:{enable_records:!1,data:[]}}),u=y(""),v=N(()=>{const a=u.value.toLowerCase();return x.services_list.filter(s=>s.motive.toLowerCase().includes(a)||s.entity_name.toLowerCase().includes(a)||s.observations.toLowerCase().includes(a)||h(s.accounting.total_value).toString().toLowerCase().includes(a)||h(s.accounting.partial_value).toString().toLowerCase().includes(a)||s.deadline.includes(a))}),i=y({mode:"create",show:!1,get title(){switch(this.mode){case"create":return"Criar serviço";case"update":return"Editar serviço";case"pay":return"Pagar serviço";case"see":return"Ver informações do serviço"}},get primary_button_txt(){switch(this.mode){case"create":return"Cadastrar";case"update":return"Atualizar";case"pay":return"Pagar";case"see":return"Fechar"}}}),k=(a,s=null)=>{const t=["update","pay","see"].includes(a);if(s!==null&&t){const m=x.services_list.find(_=>_.id===s);if(m){const{id:_,motive:V,entity_name:B,observations:D,records:w,accounting:f}=m;o.id=_,o.title=V,o.client=B,o.total_value=f.total_value,o.partial_value=f.partial_value,o.observations=D,o.records_list.enable_records=!!w.length,o.records_list.data=w.map(M=>g(M))}}i.value.mode=a,i.value.show=!0},L=()=>{o.reset(),i.value.show=!1};return(a,s)=>(l(),c(C,null,[n(d(P),{title:r.page.name},null,8,["title"]),n(E,{page:r.page,page_options:r.page_options},{header:b(()=>[e("h2",R,p(r.page.name)+" | Serviços Concluídos ",1)]),default:b(()=>[e("div",Z,[e("div",G,[e("div",H,[e("div",I,[n(d(U),{class:"w-5 y-5"}),S(e("input",{type:"text",name:"search_term",id:"search_term",autocomplete:"on",class:"simple-input",autofocus:"true",placeholder:"Pesquisar termo...","onUpdate:modelValue":s[0]||(s[0]=t=>u.value=t)},null,512),[[T,u.value]])])])])]),e("div",J,[e("div",K,[e("div",Q,[e("div",W,[e("div",X,[e("div",Y,[e("div",ee,[e("div",te,[e("table",se,[oe,e("tbody",null,[v.value.length?(l(!0),c(C,{key:0},$(v.value,t=>(l(),c("tr",ae,[e("td",ne,p(t.id),1),e("td",re,[O(p(t.motive)+" ",1),t.observations?(l(),c("span",{key:0,title:t.observations,class:"inline-flex items-center rounded-md bg-gray-50 px-2 py-1 text-xs font-medium text-gray-600 ring-1 ring-inset ring-gray-500/10 cursor-help"},"OBS",8,ie)):A("",!0)]),e("td",le,p(t.entity_name),1),e("td",ce,p(d(h)(t.accounting.total_value)),1),e("td",{class:"whitespace-nowrap px-4 py-4 text-center cursor-pointer hover:text-green-700 active:text-green-900 select-none print:hidden",title:"VER: "+t.motive+"("+t.entity_name+")",onClick:m=>k("see",t.id)},[n(d(z),{class:"w-4 h-4 m-auto"})],8,de)]))),256)):(l(),c("tr",pe,me))])])])])])])])])])]),n(F,{show:i.value.show,modal:i.value,service:d(o),onClose:L},null,8,["show","modal","service"]),n(j,{mode:["rollup","print_page"]})]),_:1},8,["page","page_options"])],64))}};export{De as default};
