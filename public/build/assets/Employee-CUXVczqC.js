import{r as ae,k as b,c as T,o,w as C,e as i,b as g,n as G,f as L,t as r,a as e,H as ne,h as ie,s as x,d as l,v,u as p,F as q,g as N,I as pe,x as Z,m as ye,T as _e,Z as he}from"./app-rFp3DUWb.js";import{a as xe,_ as be}from"./AppLayout-Cy2iqO0z.js";import{_ as ge}from"./CreateUpdateModal-DUu5ohjo.js";import{_ as ve}from"./PrimaryButton-DYVP7xNc.js";import{_ as fe}from"./SecondaryButton-BdpO2WF3.js";import{d as Q,a as ke,g as we,h as $e,e as M,v as Ce,t as D}from"./general-D_37hS-e.js";import{r as de}from"./PlusIcon-Hj45r85u.js";import{r as re}from"./XMarkIcon-CSIFDxXn.js";import{r as me}from"./PencilIcon-B49Thg9T.js";import{r as ce}from"./EyeIcon-D_BBxVz2.js";import{_ as qe}from"./FloatButton-DHxKhYNp.js";import{_ as Se}from"./ExtraOptionsButton-BPx_U2Ek.js";/* empty css                    */import{r as Ve}from"./MagnifyingGlassIcon-CHPdLIRt.js";import{r as Ee}from"./XCircleIcon-C0SLSO5n.js";import"./Modal-BjRRWiDu.js";import"./PrinterIcon-rfuh_9o_.js";import"./ArrowUturnLeftIcon-WVV-SEBJ.js";const Ae={class:"pb-12 space-y-12 divide-y-2"},Ne={class:"py-4"},Ie=e("h2",{class:"text-base font-semibold leading-7 text-gray-900"},"Informações Básicas",-1),Ue=e("p",{class:"mt-1 text-sm leading-6 text-gray-600"},"Informações sobre o funcionário como nome, salário e contato",-1),Fe={class:"mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6"},Pe={class:"sm:col-span-3"},Te=e("label",{for:"employee-name",class:"block text-sm fontSamuel@samuel-pc:~$ -medium leading-6 text-gray-900 required-input-label"},"Nome",-1),Me={class:"mt-2"},Be=["disabled"],Oe={key:0,class:"text-red-500 text-sm"},je={class:"sm:col-span-3"},De=e("label",{for:"employee-surname",class:"block text-sm font-medium leading-6 text-gray-900 required-input-label"},"Sobrenome",-1),Le={class:"mt-2"},Re=["disabled"],ze={key:0,class:"text-red-500 text-sm"},Xe={class:"sm:col-span-3"},He=e("label",{for:"employee-salary",class:"block text-sm font-medium leading-6 text-gray-900 required-input-label"},"Salário",-1),Je={class:"mt-2 relative"},Ke=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[e("span",{class:"text-gray-500 sm:text-sm"},"R$")],-1),We=["disabled"],Ze={key:0,class:"text-red-500 text-sm"},Ge={class:"sm:col-span-3"},Qe=e("label",{for:"employee-agreement",class:"block text-sm font-medium leading-6 text-gray-900"},"Acordo",-1),Ye={class:"mt-2 relative"},et=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[e("span",{class:"text-gray-500 sm:text-sm"},"R$")],-1),tt=["disabled"],ot={key:0,class:"text-red-500 text-sm"},st={class:"sm:col-span-6"},lt=e("label",{for:"employee-contacts",class:"block text-sm font-medium leading-6 text-gray-900 required-input-label"},"Números de contato",-1),at={class:"mt-2 relative"},nt=["value","disabled"],it={key:1,class:"absolute inset-y-0 right-0 p-1.5"},dt=["disabled"],rt={class:"select-none py-1"},mt=["onClick"],ct={key:2,class:"text-red-500 text-sm"},ut={class:"sm:col-span-6"},pt=e("label",{for:"employee-function-name",class:"block text-sm font-medium leading-6 text-gray-900 required-input-label"},"Função",-1),yt={class:"mt-2"},_t=["disabled"],ht={key:0,class:"text-red-500 text-sm"},xt={class:"sm:col-span-6"},bt={class:"relative flex gap-x-3"},gt={class:"flex h-6 items-center"},vt=["disabled"],ft={class:"text-sm leading-6"},kt=e("label",{for:"employee-transportation-voucher",class:"font-medium text-gray-900"},"Recebe Vale Transporte?",-1),wt=e("p",{class:"text-gray-500"},"Assinalando esta opção, o valor do vale transporte será adicionado todo mês ao Holerite",-1),$t={key:0,class:"text-red-500 font-mono"},Ct={class:"py-4"},qt=e("h2",{class:"text-base font-semibold leading-7 text-gray-900"},"Dados de Pagamento",-1),St=e("p",{class:"mt-1 text-sm leading-6 text-gray-600"},"Seção para especificar os dados necessários para o pagamento do funcionário.",-1),Vt={class:"mt-10 grid grid-cols-1 gap-x-6 gap-y-4 sm:grid-cols-6"},Et={class:"sm:col-span-6"},At=e("label",{for:"employee-payment-method",class:"text-sm font-medium leading-6 text-gray-900 required-input-label"},"Método de pagamento",-1),Nt={class:"mt-2"},It=["disabled"],Ut=e("option",{key:"0",value:null,selected:"",disabled:""},"Selecione um método de pagamento ",-1),Ft=["value"],Pt={key:0,class:"text-red-500 text-sm"},Tt={key:0,class:"sm:col-span-6 sm:grid sm:grid-cols-2 md:grid-cols-4 gap-1"},Mt={class:"sm:col-span-2 md:col-span-4 mb-5"},Bt=e("label",{for:"employee-account-type",class:"text-sm font-medium leading-6 text-gray-900 required-input-label"},"Tipo de conta",-1),Ot={class:"mt-2"},jt=["disabled"],Dt=e("option",{key:"0",value:null,selected:"",disabled:""},"Selecione um tipo de conta ",-1),Lt=["value"],Rt={key:0,class:"text-red-500 text-sm"},zt=e("label",{for:"employee-bank",class:"text-sm font-medium leading-6 text-gray-900 required-input-label"},"Banco",-1),Xt={class:"mt-2"},Ht=["disabled"],Jt=e("option",{key:"0",value:null,selected:"",disabled:""},"Selecione um banco",-1),Kt=["value"],Wt={key:0,class:"text-red-500 text-sm"},Zt=e("label",{for:"employee-bank-ag",class:"block text-sm font-medium leading-6 text-gray-900 required-input-label"},"Agência",-1),Gt={class:"mt-2"},Qt=["value","disabled"],Yt={key:0,class:"text-red-500 text-sm"},eo=e("label",{for:"employee-account-number",class:"block text-sm font-medium leading-6 text-gray-900 required-input-label"},"Com dígito",-1),to={class:"mt-2"},oo=["value","disabled"],so={key:0,class:"text-red-500 text-sm"},lo=e("label",{for:"employee-pix-cpf",class:"block text-sm font-medium leading-6 text-gray-900 required-input-label"},"CPF",-1),ao={class:"mt-2"},no=["value","disabled"],io={key:0,class:"text-red-500 text-sm"},ro={key:1,class:"sm:col-span-6"},mo={key:0},co=e("label",{for:"employee-pix-email",class:"block text-sm font-medium leading-6 text-gray-900 required-input-label"},"E-mail",-1),uo={class:"mt-2"},po=["disabled"],yo={key:0,class:"text-red-500 text-sm"},_o={key:1},ho=e("label",{for:"employee-pix-cpf",class:"block text-sm font-medium leading-6 text-gray-900 required-input-label"},"CPF",-1),xo={class:"mt-2"},bo=["value","disabled"],go={key:0,class:"text-red-500 text-sm"},vo={key:2},fo=e("label",{for:"employee-pix-phone-number",class:"block text-sm font-medium leading-6 text-gray-900 required-input-label"},"Número de telefone",-1),ko={class:"mt-2"},wo=["value","disabled"],$o={key:0,class:"text-red-500 text-sm"},Co={key:3},qo=e("label",{for:"employee-pix-token",class:"block text-sm font-medium leading-6 text-gray-900 required-input-label"},"Token",-1),So={class:"mt-2"},Vo=["disabled"],Eo={key:0,class:"text-red-500 text-sm"},Ao={class:"py-4"},No=e("h2",{class:"text-base font-semibold leading-7 text-gray-900"},"Dados de Pagamento de Horas Extras ",-1),Io=e("p",{class:"mt-1 text-sm leading-6 text-gray-600"},"As horas extras precisam ser pagas via PIX, então precisamos de pelo menos 1 pix para pagamento. Essa informação será utilizada na página de Cálculo de Horas Extras.",-1),Uo={class:"mt-10 grid grid-cols-1 gap-x-6 gap-y-4 sm:grid-cols-6"},Fo={class:"sm:col-span-6"},Po=e("label",{for:"employee-payment-method",class:"text-sm font-medium leading-6 text-gray-900 required-input-label"},"PIX",-1),To={class:"mt-2"},Mo=["disabled"],Bo=e("option",{key:"0",value:null,selected:"",disabled:""},"Selecione um método PIX ",-1),Oo=["value"],jo={key:0,class:"text-red-500 text-sm"},Do={key:0,class:"sm:col-span-6"},Lo={key:0},Ro=e("label",{for:"employee-overtime-pix-email",class:"block text-sm font-medium leading-6 text-gray-900 required-input-label"},"E-mail",-1),zo={class:"mt-2"},Xo=["disabled"],Ho={key:0,class:"text-red-500 text-sm"},Jo={key:1},Ko=e("label",{for:"employee-overtime-pix-cpf",class:"block text-sm font-medium leading-6 text-gray-900 required-input-label"},"CPF",-1),Wo={class:"mt-2"},Zo=["value","disabled"],Go={key:0,class:"text-red-500 text-sm"},Qo={key:2},Yo=e("label",{for:"employee-overtime-pix-phone-number",class:"block text-sm font-medium leading-6 text-gray-900 required-input-label"},"Número de telefone",-1),es={class:"mt-2"},ts=["value","disabled"],os={key:0,class:"text-red-500 text-sm"},ss={key:3},ls=e("label",{for:"employee-overtime-pix-token",class:"block text-sm font-medium leading-6 text-gray-900 required-input-label"},"Token",-1),as={class:"mt-2"},ns=["disabled"],is={key:0,class:"text-red-500 text-sm"},ds={__name:"CreateUpdateEmployeesModal",props:{modal:Object,employee:{type:Object,default:null},account_types_list:Array,payment_methods_list:Array,banks_list:Array},emits:["close","submit"],setup(t,{emit:S}){const I=S,a=t,k=ae(""),U=(c=null)=>{c&&c.preventDefault();const n=M(k.value);if(n.length===11){if(a.employee.errors.contacts="",a.employee.contacts.includes(n)){a.employee.errors.contacts="Número já adicionado na lista";return}a.employee.contacts.push(k.value),k.value=""}else a.employee.errors.contacts="Números de contato precisam ter 11 dígitos"},R=c=>{a.employee.contacts=a.employee.contacts.filter(n=>n!==c)},Y=b(()=>Q(k.value)),w=b(()=>Q(a.employee.pix_phone_number)),V=b(()=>ke(a.employee.pix_cpf)),F=b(()=>we(a.employee.bank_ag)),ee=b(()=>$e(a.employee.account_number)),z=b(()=>{const{name:c,surname:n,salary:h,contacts:s,function_name:B,payment_method_id:O,overtime_payment_method_id:H,bank_id:oe,pix_cpf:j,pix_email:J,pix_phone_number:K,pix_token:W,bank_ag:se,account_type_id:le,account_number:ue}=a.employee;if(!c||!n||!h||h<0||!s.length||!B||!O||!H)return!1;let A=!1;switch(O){case 1:case 6:A=le&&oe&&se&&ue&&j;case 3:A=!!J;case 4:A=!!j;case 5:A=!!K;case 7:A=!!W;default:A=!0}if(!A)return!1;if(X)switch(H){case 3:return!!J;case 4:return!!j;case 5:return!!K;case 7:return!!W;default:return!0}}),m=b(()=>a.modal.mode==="see"),te=b(()=>[1,6].includes(a.employee.payment_method_id)),X=b(()=>a.employee.payment_method_id!==a.employee.overtime_payment_method_id),y=b(()=>a.employee.contacts.length>3),u=c=>{const n=c.target.value;a.employee.errors.pix_cpf=Ce(n)?"":"CPF inválido!",a.employee.errors.pix_cpf||(a.employee.pix_cpf=M(n))},d=c=>k.value=M(c.target.value),_=c=>a.employee.pix_phone_number=M(c.target.value),f=c=>a.employee.bank_ag=M(c.target.value),$=c=>a.employee.account_number=M(c.target.value),P=()=>I("close"),E=()=>I("submit");return(c,n)=>(o(),T(ge,{show:t.modal.show,maxWidth:"2xl",onClose:P},{icon:C(()=>[e("div",{class:G(["mx-auto shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-400 sm:mx-0 sm:h-10 sm:w-10",{"bg-yellow-400":t.modal.mode==="update","bg-green-400":t.modal.mode==="pay","bg-gray-400":t.modal.mode==="see"}])},[t.modal.mode==="create"?(o(),T(p(de),{key:0,class:"w-5 h-5 text-white"})):i("",!0),t.modal.mode==="update"?(o(),T(p(me),{key:1,class:"w-5 h-5 text-white"})):i("",!0),t.modal.mode==="pay"?(o(),T(p(xe),{key:2,class:"w-5 h-5 text-white"})):i("",!0),t.modal.mode==="see"?(o(),T(p(ce),{key:3,class:"w-5 h-5 text-white"})):i("",!0)],2)]),title:C(()=>[L(r(t.modal.title),1)]),content:C(()=>{var h;return[e("form",{onKeydown:n[14]||(n[14]=ne(ie(()=>{},["prevent"]),["enter"]))},[e("div",Ae,[e("section",Ne,[Ie,Ue,e("div",Fe,[e("div",Pe,[Te,e("div",Me,[x(e("input",{type:"text",name:"employee-name",id:"employee-name",autocomplete:"on",class:"simple-input disabled:bg-gray-200",placeholder:"Nome","onUpdate:modelValue":n[0]||(n[0]=s=>t.employee.name=s),disabled:m.value,required:""},null,8,Be),[[v,t.employee.name]]),t.employee.errors.name?(o(),l("p",Oe,r(t.employee.errors.name),1)):i("",!0)])]),e("div",je,[De,e("div",Le,[x(e("input",{type:"text",name:"employee-surname",id:"employee-surname",autocomplete:"on",class:"simple-input disabled:bg-gray-200",placeholder:"Sobrenome","onUpdate:modelValue":n[1]||(n[1]=s=>t.employee.surname=s),disabled:m.value,required:""},null,8,Re),[[v,t.employee.surname]]),t.employee.errors.surname?(o(),l("p",ze,r(t.employee.errors.surname),1)):i("",!0)])]),e("div",Xe,[He,e("div",Je,[Ke,x(e("input",{type:"number",min:"0",step:"0.01",name:"employee-salary",id:"employee-salary",autocomplete:"on",class:"simple-input disabled:bg-gray-200 pl-9",placeholder:"Salário","onUpdate:modelValue":n[2]||(n[2]=s=>t.employee.salary=s),disabled:m.value,required:""},null,8,We),[[v,t.employee.salary]]),t.employee.errors.salary?(o(),l("p",Ze,r(t.employee.errors.salary),1)):i("",!0)])]),e("div",Ge,[Qe,e("div",Ye,[et,x(e("input",{type:"number",min:"0",step:"0.01",name:"employee-agreement",id:"employee-agreement",autocomplete:"on",class:"simple-input disabled:bg-gray-200 pl-9",placeholder:"Valor de acrécimo (+) ou desconto (-) combinado por fora","onUpdate:modelValue":n[3]||(n[3]=s=>t.employee.agreement=s),disabled:m.value,required:""},null,8,tt),[[v,t.employee.agreement]]),t.employee.errors.agreement?(o(),l("p",ot,r(t.employee.errors.agreement),1)):i("",!0)])]),e("div",st,[lt,e("div",at,[t.modal.mode!=="see"?(o(),l("input",{key:0,type:"text",minlength:"11",maxlength:"16",name:"employee-contacts",id:"employee-contacts",autocomplete:"on",class:"simple-input disabled:bg-gray-200 pr-9",placeholder:"Adicione números de contato do funcionário",value:Y.value,onInput:d,onKeydown:ne(U,["enter"]),disabled:y.value||m.value},null,40,nt)):i("",!0),t.modal.mode!=="see"?(o(),l("div",it,[e("button",{type:"button",class:"w-full text-white text-center p-0.5 rounded-lg bg-green-500 hover:bg-green-600 active:bg-green-700",onClick:U,disabled:y.value},[g(p(de),{class:"w-5 h-5"})],8,dt)])):i("",!0),e("ul",rt,[(o(!0),l(q,null,N((h=t.employee)==null?void 0:h.contacts,(s,B)=>(o(),l("li",{key:B,class:"float-left px-2 py-1 m-1 bg-green-500 text-white text-xs rounded-lg flex flex-row items-center justify-between gap-1"},[L(r(p(Q)(s))+" ",1),t.modal.mode!=="see"?(o(),l("button",{key:0,class:"text-white",onClick:ie(O=>R(s),["stop","prevent"])},[g(p(re),{class:"w-3 h-3 text-white"})],8,mt)):i("",!0)]))),128))]),t.employee.errors&&t.employee.errors.contacts?(o(),l("p",ct,r(t.employee.errors.contacts),1)):i("",!0)])]),e("div",ut,[pt,e("div",yt,[x(e("input",{type:"text",name:"employee-function-name",id:"employee-function-name",autocomplete:"on",class:"simple-input disabled:bg-gray-200",placeholder:"Nome da função que o funcionário excerce","onUpdate:modelValue":n[4]||(n[4]=s=>t.employee.function_name=s),disabled:m.value,required:""},null,8,_t),[[v,t.employee.function_name]]),t.employee.errors.function_name?(o(),l("p",ht,r(t.employee.errors.function_name),1)):i("",!0)])]),e("div",xt,[e("div",bt,[e("div",gt,[x(e("input",{id:"employee-transportation-voucher",name:"employee-transportation-voucher",type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-green-600 focus:ring-green-600","onUpdate:modelValue":n[5]||(n[5]=s=>t.employee.transportation_voucher=s),"true-value":"1","false-value":"0",disabled:m.value,required:""},null,8,vt),[[pe,t.employee.transportation_voucher]])]),e("div",ft,[kt,wt,t.employee.errors.transportation_voucher?(o(),l("p",$t,r(t.employee.errors.transportation_voucher),1)):i("",!0)])])])])]),e("section",Ct,[qt,St,e("div",Vt,[e("div",Et,[At,e("div",Nt,[x(e("select",{name:"employee-payment-method",id:"employee-payment-method",class:"simple-select disabled:bg-gray-200","onUpdate:modelValue":n[6]||(n[6]=s=>t.employee.payment_method_id=s),disabled:m.value,required:""},[Ut,(o(!0),l(q,null,N(t.payment_methods_list,s=>(o(),l("option",{key:s.id,value:s.id},r(s.name),9,Ft))),128))],8,It),[[Z,t.employee.payment_method_id]]),t.employee.errors.payment_method_id?(o(),l("p",Pt,r(t.employee.errors.payment_method_id),1)):i("",!0)])]),te.value?(o(),l("div",Tt,[e("div",Mt,[Bt,e("div",Ot,[x(e("select",{name:"employee-account-type",id:"employee-account-type",class:"simple-select disabled:bg-gray-200","onUpdate:modelValue":n[7]||(n[7]=s=>t.employee.account_type_id=s),disabled:m.value,required:""},[Dt,(o(!0),l(q,null,N(t.account_types_list,s=>(o(),l("option",{key:s.id,value:s.id},r(s.name),9,Lt))),128))],8,jt),[[Z,t.employee.account_type_id]]),t.employee.errors.account_type?(o(),l("p",Rt,r(t.employee.errors.account_type),1)):i("",!0)])]),e("div",null,[zt,e("div",Xt,[x(e("select",{name:"employee-bank",id:"employee-bank",class:"simple-select disabled:bg-gray-200","onUpdate:modelValue":n[8]||(n[8]=s=>t.employee.bank_id=s),disabled:m.value,required:""},[Jt,(o(!0),l(q,null,N(t.banks_list,s=>(o(),l("option",{key:s.id,value:s.id},r(s.code)+" - "+r(s.name),9,Kt))),128))],8,Ht),[[Z,t.employee.bank_id]]),t.employee.errors.bank_id?(o(),l("p",Wt,r(t.employee.errors.bank_id),1)):i("",!0)])]),e("div",null,[Zt,e("div",Gt,[e("input",{type:"text",min:"4",maxlength:"4",name:"employee-bank-ag",id:"employee-bank-ag",autocomplete:"on",class:"simple-input disabled:bg-gray-200",placeholder:"Sem dígito",value:F.value,onInput:f,disabled:m.value,required:""},null,40,Qt),t.employee.errors.bank_ag?(o(),l("p",Yt,r(t.employee.errors.bank_ag),1)):i("",!0)])]),e("div",null,[eo,e("div",to,[e("input",{type:"text",minlength:"11",maxlength:"12",name:"employee-account-number",id:"employee-account-number",autocomplete:"on",class:"simple-input disabled:bg-gray-200",placeholder:"Com dígito",value:ee.value,onInput:$,disabled:m.value,required:""},null,40,oo),t.employee.errors.account_number?(o(),l("p",so,r(t.employee.errors.account_number),1)):i("",!0)])]),e("div",null,[lo,e("div",ao,[e("input",{type:"text",minlength:"11",maxlength:"14",name:"employee-pix-cpf",id:"employee-pix-cpf",autocomplete:"on",class:"simple-input disabled:bg-gray-200",placeholder:"CPF",value:V.value,onInput:u,disabled:m.value,required:""},null,40,no),t.employee.errors.pix_cpf?(o(),l("p",io,r(t.employee.errors.pix_cpf),1)):i("",!0)])])])):(o(),l("div",ro,[t.employee.payment_method_id===3?(o(),l("div",mo,[co,e("div",uo,[x(e("input",{type:"text",name:"employee-pix-email",id:"employee-pix-email",autocomplete:"on",class:"simple-input disabled:bg-gray-200",placeholder:"E-mail","onUpdate:modelValue":n[9]||(n[9]=s=>t.employee.pix_email=s),disabled:m.value,required:""},null,8,po),[[v,t.employee.pix_email]]),t.employee.errors.pix_email?(o(),l("p",yo,r(t.employee.errors.pix_email),1)):i("",!0)])])):i("",!0),t.employee.payment_method_id===4?(o(),l("div",_o,[ho,e("div",xo,[e("input",{type:"text",minlength:"11",maxlength:"14",name:"employee-pix-cpf",id:"employee-pix-cpf",autocomplete:"on",class:"simple-input disabled:bg-gray-200",placeholder:"CPF",value:V.value,onInput:u,disabled:m.value,required:""},null,40,bo),t.employee.errors.pix_cpf?(o(),l("p",go,r(t.employee.errors.pix_cpf),1)):i("",!0)])])):i("",!0),t.employee.payment_method_id===5?(o(),l("div",vo,[fo,e("div",ko,[e("input",{type:"text",minlength:"11",maxlength:"16",name:"employee-pix-phone-number",id:"employee-pix-phone-number",autocomplete:"on",class:"simple-input disabled:bg-gray-200",placeholder:"Número de telefone",value:w.value,onInput:_,disabled:m.value,required:""},null,40,wo),t.employee.errors.pix_phone_number?(o(),l("p",$o,r(t.employee.errors.pix_phone_number),1)):i("",!0)])])):i("",!0),t.employee.payment_method_id===7?(o(),l("div",Co,[qo,e("div",So,[x(e("input",{type:"text",name:"employee-pix-token",id:"employee-pix-token",autocomplete:"on",class:"simple-input disabled:bg-gray-200",placeholder:"Token","onUpdate:modelValue":n[10]||(n[10]=s=>t.employee.pix_token=s),disabled:m.value,required:""},null,8,Vo),[[v,t.employee.pix_token]]),t.employee.errors.pix_token?(o(),l("p",Eo,r(t.employee.errors.pix_token),1)):i("",!0)])])):i("",!0)]))])]),e("section",Ao,[No,Io,e("div",Uo,[e("div",Fo,[Po,e("div",To,[x(e("select",{name:"employee-payment-method",id:"employee-payment-method",class:"simple-select disabled:bg-gray-200","onUpdate:modelValue":n[11]||(n[11]=s=>t.employee.overtime_payment_method_id=s),disabled:m.value,required:""},[Bo,(o(!0),l(q,null,N(t.payment_methods_list.filter(s=>[3,4,5,7].includes(s.id)),s=>(o(),l("option",{key:s.id,value:s.id},r(s.name),9,Oo))),128))],8,Mo),[[Z,t.employee.overtime_payment_method_id]]),t.employee.errors.overtime_payment_method_id?(o(),l("p",jo,r(t.employee.errors.overtime_payment_method_id),1)):i("",!0)])]),X.value?(o(),l("div",Do,[t.employee.overtime_payment_method_id===3?(o(),l("div",Lo,[Ro,e("div",zo,[x(e("input",{type:"text",name:"employee-overtime-pix-email",id:"employee-overtime-pix-email",autocomplete:"on",class:"simple-input disabled:bg-gray-200",placeholder:"E-mail","onUpdate:modelValue":n[12]||(n[12]=s=>t.employee.pix_email=s),disabled:m.value,required:""},null,8,Xo),[[v,t.employee.pix_email]]),t.employee.errors.pix_email?(o(),l("p",Ho,r(t.employee.errors.pix_email),1)):i("",!0)])])):i("",!0),t.employee.overtime_payment_method_id===4?(o(),l("div",Jo,[Ko,e("div",Wo,[e("input",{type:"text",minlength:"11",maxlength:"14",name:"employee-overtime-pix-cpf",id:"employee-overtime-pix-cpf",autocomplete:"on",class:"simple-input disabled:bg-gray-200",placeholder:"CPF",value:V.value,onInput:u,disabled:m.value,required:""},null,40,Zo),t.employee.errors.pix_cpf?(o(),l("p",Go,r(t.employee.errors.pix_cpf),1)):i("",!0)])])):i("",!0),t.employee.overtime_payment_method_id===5?(o(),l("div",Qo,[Yo,e("div",es,[e("input",{type:"text",minlength:"11",maxlength:"16",name:"employee-overtime-pix-phone-number",id:"employee-overtime-pix-phone-number",autocomplete:"on",class:"simple-input disabled:bg-gray-200",placeholder:"Número de telefone",value:w.value,onInput:_,disabled:m.value,required:""},null,40,ts),t.employee.errors.pix_phone_number?(o(),l("p",os,r(t.employee.errors.pix_phone_number),1)):i("",!0)])])):i("",!0),t.employee.overtime_payment_method_id===7?(o(),l("div",ss,[ls,e("div",as,[x(e("input",{type:"text",name:"employee-overtime-pix-token",id:"employee-overtime-pix-token",autocomplete:"on",class:"simple-input disabled:bg-gray-200",placeholder:"Token","onUpdate:modelValue":n[13]||(n[13]=s=>t.employee.pix_token=s),disabled:m.value,required:""},null,8,ns),[[v,t.employee.pix_token]]),t.employee.errors.pix_token?(o(),l("p",is,r(t.employee.errors.pix_token),1)):i("",!0)])])):i("",!0)])):i("",!0)])])])],32)]}),footer:C(()=>[t.modal.mode!=="see"?(o(),T(fe,{key:0,class:G({disabled:t.employee.processing}),onClick:n[15]||(n[15]=h=>P())},{default:C(()=>[L(" Cancelar ")]),_:1},8,["class"])):i("",!0),g(ve,{class:G({disabled:t.employee.processing||!z.value}),disabled:t.employee.processing||!z.value,onClick:n[16]||(n[16]=h=>E())},{default:C(()=>[L(r(t.modal.primary_button_txt),1)]),_:1},8,["class","disabled"])]),_:1},8,["show"]))}},rs={class:"font-semibold text-xl text-gray-800 leading-tight"},ms={class:"pt-12 print:hidden print:pt-0"},cs={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 print:w-full"},us={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-5"},ps={class:"flex flex-row items-center space-x-3"},ys={class:"py-12 print:py-0"},_s={class:"max-w-7xl mx-auto print:max-w-full"},hs={class:"px-0 print:px-0"},xs={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg print:shadow-none"},bs={class:"flex flex-col"},gs={class:"overflow-x-auto sm:-mx-6 lg:-mx-8"},vs={class:"inline-block min-w-full py-2 sm:px-6 lg:px-8"},fs={class:"overflow-hidden"},ks={class:"min-w-full text-left text-sm print:text-xs font-light"},ws=e("thead",{class:"border-b font-medium"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-4 text-center"},"#"),e("th",{scope:"col",class:"px-6 py-4 text-center"},"Funcionário"),e("th",{scope:"col",class:"px-6 py-4 text-center"},"Salário"),e("th",{scope:"col",class:"px-6 py-4 text-center"},"Contatos"),e("th",{scope:"col",class:"px-6 py-4 text-center"},"Função"),e("th",{scope:"col",class:"px-6 py-4 text-center print:hidden",colspan:"4"}," Ações")])],-1),$s={class:"border-b transition duration-300 ease-in-out hover:bg-neutral-100 print:break-inside-avoid"},Cs={class:"whitespace-nowrap py-4 text-center font-medium"},qs={class:"whitespace-normal px-6 py-4 text-center trim"},Ss={class:"whitespace-nowrap px-2 py-4 text-center"},Vs=["title"],Es=["href"],As={class:"whitespace-nowrap px-2 py-4 text-center"},Ns=["title","onClick"],Is=["title","onClick"],Us=["title","onClick"],Fs=["title","onClick"],Ps={key:1,class:"transition duration-300 ease-in-out hover:bg-neutral-100 print:break-inside-avoid"},Ts=e("td",{class:"whitespace-nowrap px-6 py-4 text-center",colspan:"9"},"Não há funcionários cadastradas no momento!",-1),Ms=[Ts],ol={__name:"Employee",props:{page:Object,page_options:{type:Array,default:null},employees_list:Array,account_types_list:Array,payment_methods_list:Array,banks_list:Array},setup(t){const S=t,I=ye.useToast(),a=_e({id:null,name:"",surname:"",salary:0,agreement:0,contacts:[],function_name:"",transportation_voucher:!1,payment_method_id:null,overtime_payment_method_id:null,bank_id:null,pix_cpf:"",pix_email:"",pix_phone_number:"",pix_token:"",bank_ag:"",account_type_id:null,account_number:""}),k=b(()=>S.employees_list.contacts?JSON.parse(S.employees_list.contacts).length:0),U=ae(""),R=b(()=>{const y=U.value.toLowerCase();return S.employees_list.filter(u=>{const{id:d,name:_,surname:f,salary:$,contacts:P,function_name:E}=u,c=[(d==null?void 0:d.toString())??"",(_==null?void 0:_.toLowerCase())??"",(f==null?void 0:f.toLowerCase())??"",($==null?void 0:$.toString())??"",D($||"-"),(E==null?void 0:E.toLowerCase())??""],n=JSON.parse(P).some(h=>h==null?void 0:h.includes(y));for(let h of c)if(h.includes(y))return!0;return n})}),Y=b(()=>S.employees_list.reduce((y,u)=>y+(u.salary+u.agreement),0)),w=ae({mode:"create",show:!1,get title(){switch(this.mode){case"create":return"Criar funcionário";case"update":return"Editar funcionário";case"see":return"Ver informações do funcionário"}},get primary_button_txt(){switch(this.mode){case"create":return"Cadastrar";case"update":return"Atualizar";case"see":return"Fechar"}}}),V=(y,u=null)=>{const d=["update","see"].includes(y);if(u!==null&&d){const _=S.employees_list.find(f=>f.id===u);if(_){const{id:f,name:$,surname:P,salary:E,agreement:c,contacts:n,function_name:h,transportation_voucher:s,payment_method_id:B,overtime_payment_method_id:O,bank_id:H,pix_cpf:oe,pix_email:j,pix_phone_number:J,pix_token:K,bank_ag:W,account_type_id:se,account_number:le}=_;a.id=f,a.name=$,a.surname=P,a.salary=E,a.agreement=c,a.contacts=JSON.parse(n),a.function_name=h,a.transportation_voucher=s,a.payment_method_id=B,a.overtime_payment_method_id=O,a.bank_id=H,a.pix_cpf=oe,a.pix_email=j,a.pix_phone_number=J,a.pix_token=K,a.bank_ag=W,a.account_type_id=se,a.account_number=le}}w.value.mode=y,w.value.show=!0},F=()=>{a.reset(),w.value.show=!1},ee=()=>{a.post(route("employees.store"),{preserveScroll:!0,onSuccess:()=>F(),onError:y=>{console.log(y)}})},z=()=>{a.put(route("employees.update",a.id),{preserveScroll:!0,onSuccess:()=>F()})},m=(y,u)=>{confirm(`Você tem certeza que deseja DEMITIR o funcionário "${u}"?`)&&a.delete(route("employees.fire",y),{preserveScroll:!0,onSuccess:()=>I.success("Funcionário demitido com sucesso!")})},te=(y,u)=>{confirm(`Você tem certeza que deseja EXCLUIR o funcionário "${u}"?`)&&a.delete(route("employees.destroy",y),{preserveScroll:!0,onSuccess:()=>I.success("Funcionário deletado com sucesso!")})},X=()=>{switch(w.value.mode){case"create":return ee();case"update":return z();case"see":return F();default:I.error("Método desconhecido. Informar o Técnico.")}};return(y,u)=>(o(),l(q,null,[g(p(he),{title:t.page.name},null,8,["title"]),g(be,{page:t.page,page_options:t.page_options},{header:C(()=>[e("h2",rs,r(t.page.name)+" | "+r(p(D)(Y.value)),1),g(qe,{icon:"plus",onClick:u[0]||(u[0]=d=>V("create")),title:"Cadastrar Employee",class:"print:hidden"})]),default:C(()=>[e("div",ms,[e("div",cs,[e("div",us,[e("div",ps,[g(p(Ve),{class:"w-5 y-5"}),x(e("input",{type:"text",name:"search_term",id:"search_term",autocomplete:"on",class:"simple-input",autofocus:"true",placeholder:"Pesquisar termo...","onUpdate:modelValue":u[1]||(u[1]=d=>U.value=d)},null,512),[[v,U.value]])])])])]),e("div",ys,[e("div",_s,[e("div",hs,[e("div",xs,[e("div",bs,[e("div",gs,[e("div",vs,[e("div",fs,[e("table",ks,[ws,e("tbody",null,[R.value.length?(o(!0),l(q,{key:0},N(R.value,d=>(o(),l("tr",$s,[e("td",Cs,r(d.id),1),e("td",qs,r(d.name+" "+d.surname),1),e("td",Ss,[L(r(p(D)(d.salary+d.agreement))+" ",1),d.agreement?(o(),l("span",{key:0,title:"Salário: "+p(D)(d.salary)+" + Acordo: "+p(D)(d.agreement),class:"inline-flex items-center rounded-md bg-gray-50 px-2 py-1 text-xs font-medium text-gray-600 ring-1 ring-inset ring-gray-500/10 cursor-help"},"OBS",8,Vs)):i("",!0)]),e("td",{class:G(["grid px-2 py-4 text-center",{"grid-cols-1":k.value===1,"grid-cols-2":k.value>1}])},[(o(!0),l(q,null,N(JSON.parse(d.contacts),_=>(o(),l("a",{href:"tel:"+_,class:"px-2 hover:text-green-500 active:text-green-700"},r(p(Q)(_)),9,Es))),256))],2),e("td",As,r(d.function_name),1),e("td",{class:"whitespace-nowrap px-4 py-4 text-center cursor-pointer hover:text-yellow-700 active:text-yellow-900 select-none print:hidden",title:"EDITAR: "+d.name+" "+d.surname,onClick:_=>V("update",d.id)},[g(p(me),{class:"w-5 h-5 m-auto"})],8,Ns),e("td",{class:"whitespace-nowrap px-4 py-4 text-center cursor-pointer hover:text-indigo-700 active:text-indigo-900 select-none print:hidden",title:"VER: "+d.name+" "+d.surname,onClick:_=>V("see",d.id)},[g(p(ce),{class:"w-5 h-5 m-auto"})],8,Is),e("td",{class:"whitespace-nowrap px-4 py-4 text-center cursor-pointer hover:text-orange-700 active:text-orange-900 select-none print:hidden",title:"Demitir: "+d.name+" "+d.surname,onClick:_=>m(d.id,d.name+" "+d.surname)},[g(p(Ee),{class:"w-5 h-5 m-auto"})],8,Us),e("td",{class:"whitespace-nowrap px-4 py-4 text-center cursor-pointer hover:text-red-700 active:text-red-900 select-none print:hidden",title:"EXCLUIR: "+d.name+" "+d.surname,onClick:_=>te(d.id,d.name+" "+d.surname)},[g(p(re),{class:"w-5 h-5 m-auto"})],8,Fs)]))),256)):(o(),l("tr",Ps,Ms))])])])])])])])])])]),g(ds,{modal:w.value,employee:p(a),account_types_list:t.account_types_list,payment_methods_list:t.payment_methods_list,banks_list:t.banks_list,onSubmit:X,onClose:F},null,8,["modal","employee","account_types_list","payment_methods_list","banks_list"]),g(Se,{mode:["rollup","print_page","link"],link_type:["previous"],link:[y.route("employees.previous")]},null,8,["link"])]),_:1},8,["page","page_options"])],64))}};export{ol as default};
