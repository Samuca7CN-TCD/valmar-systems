import{m as T,T as B,d as u,o as _,b as d,u as t,Z as $,w as g,a as e,h as x,e as C,s as n,B as V,f,t as y,v as r,F as k,g as j,i as F}from"./app-nxAEGYom.js";import{_ as A}from"./AppLayout-CD0ic9x9.js";/* empty css                    */import{_ as i}from"./InputError-BXNsSEPP.js";import{e as b,a as O,b as R,d as D,c as q}from"./general-D_37hS-e.js";import{_ as J}from"./SecondaryButton-BQZMIPc2.js";import{_ as M}from"./PrimaryButton-DeVtbJBJ.js";import{r as L}from"./TrashIcon-N_mDIAhC.js";import{r as z}from"./PlusIcon-C0zORJhm.js";const G=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Cadastrar Novo Cliente ",-1),Z={class:"py-12"},H={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},K={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},Q={class:"mb-8"},W=e("h3",{class:"text-lg font-semibold text-gray-900 border-b pb-2 mb-4"},"DADOS GERAIS",-1),X={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Y={class:"md:col-span-2"},ee=e("label",{class:"block text-sm font-medium text-gray-700"},"Tipo de Cliente",-1),se={class:"mt-2 flex items-center space-x-6"},te={class:"inline-flex items-center"},oe=e("span",{class:"ml-2"},"Pessoa Física",-1),ae={class:"inline-flex items-center"},le=e("span",{class:"ml-2"},"Pessoa Jurídica",-1),de={for:"name",class:"block text-sm font-medium text-gray-700"},ne=e("span",{class:"text-red-500"},"*",-1),re={key:0},ie=e("label",{for:"trade_name",class:"block text-sm font-medium text-gray-700"},[f(" Nome Fantasia "),e("span",{class:"text-red-500"},"*")],-1),me={for:"document",class:"block text-sm font-medium text-gray-700"},ce=e("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"E-mail",-1),pe={class:"mb-8"},ue=e("h3",{class:"text-lg font-semibold text-gray-900 border-b pb-2 mb-4"},"CONTATOS",-1),_e={class:"space-y-4"},ge={class:"flex-grow"},be=["for"],fe=["onUpdate:modelValue","onInput","id"],he=["onClick"],xe={class:"mb-8"},ye=e("h3",{class:"text-lg font-semibold text-gray-900 border-b pb-2 mb-4"},"ENDEREÇO",-1),ve={class:"grid grid-cols-1 md:grid-cols-6 gap-6"},Ce={class:"md:col-span-2"},Ve=e("label",{for:"postal_code",class:"block text-sm font-medium text-gray-700"},"CEP",-1),ke={class:"md:col-span-4"},Ee=e("label",{for:"address_street",class:"block text-sm font-medium text-gray-700"},"Rua / Logradouro",-1),we={class:"md:col-span-2"},Ue=e("label",{for:"address_number",class:"block text-sm font-medium text-gray-700"},"Número",-1),Ne={class:"md:col-span-4"},Pe=e("label",{for:"address_complement",class:"block text-sm font-medium text-gray-700"},"Complemento",-1),Se={class:"md:col-span-3"},Ie=e("label",{for:"address_neighborhood",class:"block text-sm font-medium text-gray-700"},"Bairro",-1),Te={class:"md:col-span-2"},Be=e("label",{for:"address_city",class:"block text-sm font-medium text-gray-700"},"Cidade",-1),$e={class:"md:col-span-1"},je=e("label",{for:"address_state",class:"block text-sm font-medium text-gray-700"},"Estado",-1),Fe=e("h3",{class:"text-lg font-semibold text-gray-900 border-b pb-2 mb-4"},"OBSERVAÇÕES",-1),Ae={class:"mt-8 pt-5 border-t border-gray-200"},Oe={class:"flex justify-end space-x-3"},He={__name:"Create",props:{page:{type:Object,required:!1}},setup(v){const p=T.useToast(),s=B({type:"fisica",name:"",trade_name:"",document:"",email:"",contacts:[""],postal_code:"",address_street:"",address_number:"",address_complement:"",address_neighborhood:"",address_city:"",address_state:"",observations:""}),E=()=>{s.contacts.push("")},w=l=>{s.contacts.length>1&&s.contacts.splice(l,1)},U=(l,o)=>{s.contacts[o]=D(l.target.value)},N=l=>{let o=b(l.target.value);o.length<=11?s.document=O(o):s.document=R(o)},P=l=>{let o=b(l.target.value);s.postal_code=q(o),s.postal_code.length===9&&S()},S=async()=>{let l=b(s.postal_code);if(l.length===8)try{const m=await(await fetch(`https://viacep.com.br/ws/${l}/json/`)).json();m.erro?p.error("CEP não encontrado.",{position:"top-right"}):(s.address_street=m.logradouro,s.address_neighborhood=m.bairro,s.address_city=m.localidade,s.address_state=m.uf,p.success("Endereço preenchido automaticamente!",{position:"top-right"}))}catch(o){console.error("Erro ao buscar CEP:",o),p.error("Erro ao consultar o serviço de CEP.",{position:"top-right"})}},I=()=>{const l={...s.data()};l.postal_code=b(l.postal_code),l.contacts=l.contacts.map(o=>b(o)).filter(Boolean),s.transform(()=>l).post(route("clients.store"),{onSuccess:()=>{p.success("Cliente cadastrado com sucesso!"),s.reset()},onError:o=>{console.error(o),p.error("Verifique os campos e tente novamente.")}})};return(l,o)=>{var m;return _(),u(k,null,[d(t($),{title:"Novo "+(((m=v.page)==null?void 0:m.singular_name)||"Cliente")},null,8,["title"]),d(A,{page:v.page},{header:g(()=>[G]),default:g(()=>[e("div",Z,[e("div",H,[e("div",K,[e("form",{onSubmit:x(I,["prevent"]),class:"p-6"},[e("section",Q,[W,e("div",X,[e("div",Y,[ee,e("div",se,[e("label",te,[n(e("input",{type:"radio","onUpdate:modelValue":o[0]||(o[0]=a=>t(s).type=a),value:"fisica",class:"form-radio h-4 w-4 text-indigo-600"},null,512),[[V,t(s).type]]),oe]),e("label",ae,[n(e("input",{type:"radio","onUpdate:modelValue":o[1]||(o[1]=a=>t(s).type=a),value:"juridica",class:"form-radio h-4 w-4 text-indigo-600"},null,512),[[V,t(s).type]]),le])])]),e("div",null,[e("label",de,[f(y(t(s).type==="fisica"?"Nome Completo":"Razão Social")+" ",1),ne]),n(e("input",{"onUpdate:modelValue":o[2]||(o[2]=a=>t(s).name=a),type:"text",id:"name",class:"simple-input mt-1",required:""},null,512),[[r,t(s).name]]),d(i,{class:"mt-2",message:t(s).errors.name},null,8,["message"])]),t(s).type==="juridica"?(_(),u("div",re,[ie,n(e("input",{"onUpdate:modelValue":o[3]||(o[3]=a=>t(s).trade_name=a),type:"text",id:"trade_name",class:"simple-input mt-1",required:""},null,512),[[r,t(s).trade_name]]),d(i,{class:"mt-2",message:t(s).errors.trade_name},null,8,["message"])])):C("",!0),e("div",null,[e("label",me,y(t(s).type==="fisica"?"CPF":"CNPJ"),1),n(e("input",{"onUpdate:modelValue":o[4]||(o[4]=a=>t(s).document=a),type:"text",id:"document",onInput:N,class:"simple-input mt-1"},null,544),[[r,t(s).document]]),d(i,{class:"mt-2",message:t(s).errors.document},null,8,["message"])]),e("div",null,[ce,n(e("input",{"onUpdate:modelValue":o[5]||(o[5]=a=>t(s).email=a),type:"email",id:"email",class:"simple-input mt-1"},null,512),[[r,t(s).email]]),d(i,{class:"mt-2",message:t(s).errors.email},null,8,["message"])])])]),e("section",pe,[ue,e("div",_e,[(_(!0),u(k,null,j(t(s).contacts,(a,c)=>(_(),u("div",{key:c,class:"flex items-center space-x-3"},[e("div",ge,[e("label",{for:"contact-"+c,class:"sr-only"},"Contato "+y(c+1),9,be),n(e("input",{"onUpdate:modelValue":h=>t(s).contacts[c]=h,onInput:h=>U(h,c),type:"text",id:"contact-"+c,class:"simple-input w-full",placeholder:"Telefone ou outro contato"},null,40,fe),[[r,t(s).contacts[c]]])]),t(s).contacts.length>1?(_(),u("button",{key:0,onClick:x(h=>w(c),["prevent"]),type:"button",class:"text-red-500 hover:text-red-700 p-1 rounded-full bg-red-100"},[d(t(L),{class:"w-5 h-5"})],8,he)):C("",!0)]))),128))]),e("button",{onClick:x(E,["prevent"]),type:"button",class:"mt-4 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 flex items-center text-sm"},[d(t(z),{class:"w-5 h-5 mr-1"}),f(" Adicionar Contato ")])]),e("section",xe,[ye,e("div",ve,[e("div",Ce,[Ve,n(e("input",{"onUpdate:modelValue":o[6]||(o[6]=a=>t(s).postal_code=a),onInput:P,type:"text",id:"postal_code",class:"simple-input mt-1"},null,544),[[r,t(s).postal_code]]),d(i,{class:"mt-2",message:t(s).errors.postal_code},null,8,["message"])]),e("div",ke,[Ee,n(e("input",{"onUpdate:modelValue":o[7]||(o[7]=a=>t(s).address_street=a),type:"text",id:"address_street",class:"simple-input mt-1"},null,512),[[r,t(s).address_street]]),d(i,{class:"mt-2",message:t(s).errors.address_street},null,8,["message"])]),e("div",we,[Ue,n(e("input",{"onUpdate:modelValue":o[8]||(o[8]=a=>t(s).address_number=a),type:"text",id:"address_number",class:"simple-input mt-1"},null,512),[[r,t(s).address_number]]),d(i,{class:"mt-2",message:t(s).errors.address_number},null,8,["message"])]),e("div",Ne,[Pe,n(e("input",{"onUpdate:modelValue":o[9]||(o[9]=a=>t(s).address_complement=a),type:"text",id:"address_complement",class:"simple-input mt-1"},null,512),[[r,t(s).address_complement]])]),e("div",Se,[Ie,n(e("input",{"onUpdate:modelValue":o[10]||(o[10]=a=>t(s).address_neighborhood=a),type:"text",id:"address_neighborhood",class:"simple-input mt-1"},null,512),[[r,t(s).address_neighborhood]]),d(i,{class:"mt-2",message:t(s).errors.address_neighborhood},null,8,["message"])]),e("div",Te,[Be,n(e("input",{"onUpdate:modelValue":o[11]||(o[11]=a=>t(s).address_city=a),type:"text",id:"address_city",class:"simple-input mt-1"},null,512),[[r,t(s).address_city]]),d(i,{class:"mt-2",message:t(s).errors.address_city},null,8,["message"])]),e("div",$e,[je,n(e("input",{"onUpdate:modelValue":o[12]||(o[12]=a=>t(s).address_state=a),type:"text",id:"address_state",class:"simple-input mt-1",maxlength:"2"},null,512),[[r,t(s).address_state]]),d(i,{class:"mt-2",message:t(s).errors.address_state},null,8,["message"])])])]),e("section",null,[Fe,n(e("textarea",{"onUpdate:modelValue":o[13]||(o[13]=a=>t(s).observations=a),id:"observations",rows:"4",class:"simple-input mt-1",placeholder:"Informações adicionais sobre o cliente..."},null,512),[[r,t(s).observations]]),d(i,{class:"mt-2",message:t(s).errors.observations},null,8,["message"])]),e("div",Ae,[e("div",Oe,[d(t(F),{href:l.route("clients.index")},{default:g(()=>[d(J,{type:"button"},{default:g(()=>[f(" Cancelar ")]),_:1})]),_:1},8,["href"]),d(M,{type:"submit",disabled:t(s).processing},{default:g(()=>[f(" Salvar Cliente")]),_:1},8,["disabled"])])])],32)])])])]),_:1},8,["page"])],64)}}};export{He as default};
