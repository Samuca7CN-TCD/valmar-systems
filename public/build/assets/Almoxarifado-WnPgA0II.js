import{r as i,k as A,p as S,D as P,d as o,o as a,a as e,F as v,g,t as r,u as q,e as E,s as B,v as z,x as L,n as b,q as N}from"./app-CvAlCVsm.js";import{f as R}from"./general-D_37hS-e.js";const H={class:"mb-6"},O=e("h2",{class:"text-xl font-bold text-neutral-800 border-l-4 border-blue-500 pl-4 mb-4"},"ðŸ“¦ Almoxarifado em Destaque",-1),W={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8"},G={class:"bg-white rounded-lg shadow-sm p-5 border border-blue-100 flex flex-col items-center justify-center text-center"},J=e("h3",{class:"text-xl font-semibold text-blue-700 mb-3"},"ðŸ”» Itens com Baixo Estoque",-1),K={key:0,class:"space-y-2 text-base text-neutral-700 w-full"},Q={class:"font-medium"},X={class:"text-neutral-500 text-sm"},Y={key:1,class:"text-base text-neutral-500 mt-4"},Z={class:"bg-white rounded-lg shadow-sm p-5 border border-green-100 flex flex-col items-center justify-center text-center"},ee=e("h3",{class:"text-xl font-semibold text-green-700 mb-3"},"ðŸ”¥ Mais Usados/Vendidos Hoje",-1),te={key:0,class:"space-y-2 text-base text-neutral-700 w-full"},se={class:"font-medium"},oe={class:"text-neutral-500 text-sm"},ae={key:1,class:"text-base text-neutral-500 mt-4"},ne={class:"bg-white rounded-lg shadow-sm p-5 border border-purple-100 flex flex-col items-center justify-center text-center"},re=e("h3",{class:"text-xl font-semibold text-purple-700 mb-3"},"ðŸ†• Ãšltimos Itens Movimentados",-1),le={key:0,class:"space-y-2 text-base text-neutral-700 w-full"},de={class:"font-medium"},ie={class:"text-neutral-500 text-sm"},ce={key:1,class:"text-base text-neutral-500 mt-4"},ue={class:"bg-white rounded-lg shadow-sm p-6 border border-orange-200"},pe=e("h3",{class:"text-xl font-bold text-orange-700 border-l-4 border-orange-500 pl-4 mb-6"},"ðŸ”„ MovimentaÃ§Ãµes Recentes (Ãšltimos 7 Dias)",-1),me={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"},xe=e("label",{for:"search-recent-movements",class:"block text-sm font-medium text-neutral-700 mb-1"},"Pesquisar (Motivo, Entidade, UsuÃ¡rio):",-1),ve=e("label",{for:"movement-type-filter",class:"block text-sm font-medium text-neutral-700 mb-1"},"Tipo de MovimentaÃ§Ã£o:",-1),_e=e("option",{value:"all"},"Todos",-1),he=e("option",{value:"entrada"},"Entrada",-1),ge=e("option",{value:"saida"},"SaÃ­da/Venda",-1),be=e("option",{value:"servico"},"ServiÃ§o",-1),ye=[_e,he,ge,be],fe={class:"overflow-x-auto rounded-lg border border-gray-200"},we={key:0,class:"min-w-full divide-y divide-gray-200"},ke=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," ID"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Tipo"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Motivo / Entidade"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," UsuÃ¡rio"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Data")])],-1),Me={class:"bg-white divide-y divide-gray-200"},Te={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-neutral-900"},je={class:"px-6 py-4 whitespace-nowrap text-sm text-neutral-700 capitalize"},Ce={class:"px-6 py-4 text-sm text-neutral-700"},De={class:"font-semibold"},Ie={key:0,class:"block text-xs text-neutral-500"},Se={class:"px-6 py-4 whitespace-nowrap text-sm text-neutral-700"},qe={class:"px-6 py-4 whitespace-nowrap text-sm text-neutral-500"},Ee={key:1,class:"text-sm text-neutral-500 text-center py-6"},Be={key:0,class:"flex justify-center mt-6 space-x-1 flex-wrap"},Ne=["disabled"],Re=["disabled"],Ue={key:0,class:"px-4 py-2 text-sm text-gray-500"},$e=["onClick"],Fe=["disabled"],Ve=["disabled"],Le={__name:"Almoxarifado",setup(Ae){const y=i([]),f=i([]),w=i([]),k=i([]),n=i(1),d=i(1),U=i(0),T=i(10),p=i(""),_=i("all"),j=i(!0),$=async()=>{try{const s=(await N.get(route("dashboard.data.warehouse"))).data;y.value=s.lowStockItems,f.value=s.topItemsToday,w.value=s.latestItems}catch(l){console.error("Erro ao carregar dados do almoxarifado:",l)}},M=async()=>{j.value=!0;try{const s=(await N.get(route("dashboard.data.warehouse"),{params:{recent_movements_page:n.value,recent_movements_per_page:T.value,search_recent_movements:p.value||null,movement_type:_.value}})).data.recentMovements;k.value=s.data,n.value=s.current_page,d.value=s.last_page,U.value=s.total,T.value=s.per_page}catch(l){console.error("Erro ao carregar movimentaÃ§Ãµes recentes do almoxarifado:",l)}finally{j.value=!1}},h=l=>{l>=1&&l<=d.value&&(n.value=l)},C=()=>{n.value=1,M()},F=(l,s,t=5)=>{const c=[],D="...",I=Math.floor(t/2);if(s<=t+2){for(let m=1;m<=s;m++)c.push(m);return c}let u=l-I,x=l+I;u<1&&(u=1,x=t),x>s&&(x=s,u=s-t+1),u=Math.max(1,u),u>1&&(c.push(1),u>2&&c.push(D));for(let m=u;m<=x;m++)c.push(m);return x<s&&(x<s-1&&c.push(D),c.push(s)),c},V=A(()=>F(n.value,d.value));return S([p,_],()=>{p.timeout&&clearTimeout(p.timeout),p.timeout=setTimeout(()=>{C()},300),_.value&&C()}),S(n,()=>{M()}),P(()=>{$(),M()}),(l,s)=>(a(),o("div",H,[O,e("div",W,[e("div",G,[J,y.value.length?(a(),o("ul",K,[(a(!0),o(v,null,g(y.value,t=>(a(),o("li",{key:t.id,class:"flex justify-between items-center bg-blue-50 p-2 rounded"},[e("span",Q,r(t.name),1),e("span",X,"("+r(t.quantity)+" "+r(t.measurement_unit)+")",1)]))),128))])):(a(),o("p",Y,"Nenhum item com baixo estoque."))]),e("div",Z,[ee,f.value.length?(a(),o("ul",te,[(a(!0),o(v,null,g(f.value,t=>(a(),o("li",{key:t.id,class:"flex justify-between items-center bg-green-50 p-2 rounded"},[e("span",se,r(t.name),1),e("span",oe,"("+r(t.total_quantity)+" usos/vendas)",1)]))),128))])):(a(),o("p",ae,"Nenhum registro hoje."))]),e("div",ne,[re,w.value.length?(a(),o("ul",le,[(a(!0),o(v,null,g(w.value,t=>(a(),o("li",{key:t.id,class:"flex justify-between items-center bg-purple-50 p-2 rounded"},[e("span",de,r(t.name),1),e("span",ie,"("+r(q(R)(t.updated_at,"short_date"))+")",1)]))),128))])):(a(),o("p",ce,"Nenhum novo item recente."))])]),e("div",ue,[pe,e("div",me,[e("div",null,[xe,B(e("input",{id:"search-recent-movements",type:"text","onUpdate:modelValue":s[0]||(s[0]=t=>p.value=t),placeholder:"Pesquisar...",class:"simple-input w-full"},null,512),[[z,p.value]])]),e("div",null,[ve,B(e("select",{id:"movement-type-filter","onUpdate:modelValue":s[1]||(s[1]=t=>_.value=t),class:"simple-select w-full"},ye,512),[[L,_.value]])])]),e("div",fe,[k.value.length?(a(),o("table",we,[ke,e("tbody",Me,[(a(!0),o(v,null,g(k.value,t=>(a(),o("tr",{key:t.id,class:"hover:bg-gray-50"},[e("td",Te,r(t.id),1),e("td",je,r(t.type===0?"Entrada":t.type===1?"ServiÃ§o":t.type===3?"SaÃ­da (Uso)":t.type===4?"SaÃ­da (Venda)":"Outro"),1),e("td",Ce,[e("span",De,r(t.motive),1),t.entity_name?(a(),o("span",Ie,"("+r(t.entity_name)+")",1)):E("",!0)]),e("td",Se,r(t.user_name)+" "+r(t.user_surname),1),e("td",qe,r(q(R)(t.date,"short_date")),1)]))),128))])])):(a(),o("p",Ee,"Nenhuma movimentaÃ§Ã£o recente encontrada para os filtros selecionados."))]),d.value>1?(a(),o("div",Be,[e("button",{onClick:s[2]||(s[2]=t=>h(1)),disabled:n.value===1,class:b(["px-4 py-2 border rounded-md text-sm transition-colors duration-150 ease-in-out",{"bg-gray-200 text-gray-500 cursor-not-allowed":n.value===1,"hover:bg-orange-100 hover:text-orange-700":n.value!==1}])}," Primeira ",10,Ne),e("button",{onClick:s[3]||(s[3]=t=>h(n.value-1)),disabled:n.value===1,class:b(["px-4 py-2 border rounded-md text-sm transition-colors duration-150 ease-in-out",{"bg-gray-200 text-gray-500 cursor-not-allowed":n.value===1,"hover:bg-orange-100 hover:text-orange-700":n.value!==1}])}," Anterior ",10,Re),(a(!0),o(v,null,g(V.value,t=>(a(),o(v,{key:t},[t==="..."?(a(),o("span",Ue,"...")):(a(),o("button",{key:1,onClick:c=>h(t),class:b(["px-4 py-2 border rounded-md text-sm transition-colors duration-150 ease-in-out",{"bg-orange-600 text-white border-orange-600":t===n.value,"bg-gray-100 text-orange-700 hover:bg-orange-200 hover:text-orange-800":t!==n.value}])},r(t),11,$e))],64))),128)),e("button",{onClick:s[4]||(s[4]=t=>h(n.value+1)),disabled:n.value===d.value,class:b(["px-4 py-2 border rounded-md text-sm transition-colors duration-150 ease-in-out",{"bg-gray-200 text-gray-500 cursor-not-allowed":n.value===d.value,"hover:bg-orange-100 hover:text-orange-700":n.value!==d.value}])}," PrÃ³xima ",10,Fe),e("button",{onClick:s[5]||(s[5]=t=>h(d.value)),disabled:n.value===d.value,class:b(["px-4 py-2 border rounded-md text-sm transition-colors duration-150 ease-in-out",{"bg-gray-200":n.value===d.value,"hover:bg-orange-100 hover:text-orange-700":n.value!==d.value}])}," Ãšltima ",10,Ve)])):E("",!0)])]))}};export{Le as default};
