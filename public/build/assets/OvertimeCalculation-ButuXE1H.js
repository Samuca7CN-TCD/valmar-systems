import{o as x,e as v,a as t,y as W,d as _,l as Z,b as h,u as r,Z as G,w as B,q as p,s as U,f as E,n as f,F as X,g as K,t as l,v as P,c as Q,h as j}from"./app-CQCMULRS.js";import{_ as Y}from"./AppLayout-DVsrCAOA.js";import{t as k}from"./general-CW50Zh8a.js";import{_ as tt}from"./ExtraOptionsButton-BsREayZP.js";/* empty css                    */import{r as et}from"./DocumentDuplicateIcon-DlucS3LS.js";import"./PrinterIcon-CfTT1zCI.js";function A(m,b){return x(),v("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7.5 7.5 3m0 0L12 7.5M7.5 3v13.5m13.5 0L16.5 21m0 0L12 16.5m4.5 4.5V7.5"})])}const nt=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Cálculo de Horas Extras ",-1),at={class:"pt-6 print:hidden print:pt-0"},st={class:"w-fit max-w-7xl mx-auto sm:px-6 lg:px-8 print:w-full"},ot={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-5"},rt={class:"flex flex-col items-center justify-center align-middle gap-5"},ct=t("h2",{class:"text-green-700 font-extrabold text-2xl"},"Controles da Tabela",-1),it={class:"inline-flex items-center cursor-pointer"},lt=t("div",{class:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"},null,-1),dt=t("span",{class:"ms-3 text-sm font-medium text-gray-900"},"Mostrar funcionário omitidos",-1),ut={class:"py-6 print:py-6"},_t={class:"max-w-full mx-auto print:max-w-full"},ht={class:"px-0 print:px-0"},pt={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg print:shadow-none"},ft={class:"flex flex-col"},xt={class:"overflow-x-auto sm:-mx-6 lg:-mx-8"},vt={class:"inline-block min-w-full sm:px-6 lg:px-8"},mt={class:"overflow-hidden"},bt={class:"min-w-full text-left text-sm font-light"},gt={class:"border-b font-medium"},wt={class:"bg-neutral-200"},kt=t("th",{scope:"col",class:"px-6 py-4 text-center"},"Funcionário",-1),yt=t("th",{scope:"col",class:"px-6 py-4 text-center"},"Salário",-1),Ct=t("th",{scope:"col",class:"px-6 py-4 text-center print:hidden",title:"Início do expediente"}," H. Entrada",-1),Tt=t("th",{scope:"col",class:"px-6 py-4 text-center print:hidden",title:"Saída para o horário de Almoço"},"S. Almoço",-1),Vt=t("th",{scope:"col",class:"px-6 py-4 text-center print:hidden",title:"Entrada da volta do horário de Almoço"},"E. Almoço",-1),Et=t("th",{scope:"col",class:"px-6 py-4 text-center print:hidden",title:"Saída do expediente"},"H. Saída",-1),Pt=t("th",{scope:"col",class:"px-6 py-4 text-center",title:"Total de horas do Expediente"},"Total Horas",-1),At={class:"print:hidden"},Nt={class:"print:hidden"},$t=t("th",{scope:"col",class:"px-6 py-4 text-center",colspan:"2"}," Pix",-1),Mt={class:"whitespace-nowrap py-1 text-center font-medium print:hidden"},St=["value","onChange","checked"],Ut={class:"py-4 text-center font-medium"},Ft={class:"whitespace-nowrap py-1 text-center font-medium"},Ht={class:"whitespace-nowrap py-1 text-center font-medium print:hidden relative"},Ot=["onClick"],It=["disabled","onUpdate:modelValue"],Bt={class:"whitespace-nowrap py-1 text-center font-medium print:hidden relative"},Xt=["onClick"],jt=["disabled","onUpdate:modelValue"],Jt={class:"whitespace-nowrap py-1 text-center font-medium print:hidden relative"},Lt=["onClick"],qt=["disabled","onUpdate:modelValue"],Dt={class:"whitespace-nowrap py-1 text-center font-medium print:hidden relative"},Rt=["onClick"],zt=["disabled","onUpdate:modelValue"],Wt={class:"whitespace-nowrap py-1 text-center font-medium"},Zt=["onClick"],Gt={class:"flex flex-row justify-center items-center align-middle gap-3"},Kt={class:"whitespace-nowrap py-1 text-center font-medium uppercase"},Qt={key:1,class:"border-b transition duration-300 ease-in-out print:break-inside-avoid text-sm print:text-md bg-neutral-200"},Yt=t("td",{class:"print:hidden"},null,-1),te=t("td",{colspan:"2"},null,-1),ee=t("td",{class:"print:hidden",colspan:"4"},null,-1),ne=t("td",{class:"whitespace-nowrap py-1 font-medium text-center"}," Total ",-1),ae=t("td",{class:"whitespace-nowrap py-1 text-center font-medium",colspan:"2"},null,-1),se={key:2,class:"transition duration-300 ease-in-out hover:bg-neutral-100 print:break-inside-avoid"},oe=t("td",{class:"whitespace-nowrap px-6 py-1 text-center",colspan:"9"},"Não há funcionários cadastradas no momento!",-1),re=[oe],pe={__name:"OvertimeCalculation",props:{page:Object,page_options:{type:Array,default:null},employees_list:Array,account_types_list:Array,payment_methods_list:Array,banks_list:Array,total_fifty_percent_value:Number,total_hundred_percent_value:Number},setup(m){const b=m,d=W.useToast(),c=_(JSON.parse(JSON.stringify(b.employees_list))),J=JSON.parse(JSON.stringify(b.employees_list)),N=_(!1),g=_(!0),w=_(!0),$=_(!1),L=()=>{d.clear(),c.value=J,d.success("Tabela resetada com sucesso!")},q=()=>{c.value.forEach(e=>H(e,N.value)),N.value=!N.value},D=e=>{switch(e){case"pix_email":return"E-mail";case"pix_cpf":return"Cpf";case"pix_phone_number":return"Telefone";case"pix_token":return"Token"}return"-"},R=e=>{let a=e[e.overtime_payment_method.cod];if(d.clear(),navigator.clipboard&&navigator.clipboard.writeText)return navigator.clipboard.writeText(a).then(()=>{d.success(`PIX de ${e.name} copiado para a área de transferência`),console.log("Texto copiado para a área de transferência")}).catch(n=>{d.error(`Não foi possível copiar o PIX de ${e.name} para a área de transferência`),console.error("Erro ao copiar texto para a área de transferência",n)});{const n=document.createElement("textarea");n.value=a,document.body.appendChild(n),n.focus(),n.select();try{document.execCommand("copy"),d.success(`PIX de ${e.name} copiado para a área de transferência`),console.log("Texto copiado para a área de transferência")}catch(o){d.error(`Não foi possível copiar o PIX de ${e.name} para a área de transferência`),console.error("Erro ao copiar texto para a área de transferência",o)}document.body.removeChild(n)}},y=(e,a)=>{if(!c||!c.value||!Array.isArray(c.value)){console.error("As informações dos funcionários não estão devidamente formatadas.");return}c.value.forEach(n=>{n.show&&(console.log("SHOW: ",n.show),n[a]=e)})},C=_(b.total_fifty_percent_value),T=_(b.total_hundred_percent_value),V=e=>{const[a,n]=e.split(":").map(Number);return a*60+n},z=e=>{if(!e.check_in_time||!e.leave_for_lunch_break||!e.check_in_after_lunch_break||!e.check_out_time)return e.total_time=0,e.fifty_percent_value=0,e.hundred_percent_value=0,0;const a=V(e.check_in_time),n=V(e.leave_for_lunch_break),o=V(e.check_in_after_lunch_break),i=V(e.check_out_time),u=n-a,s=i-o,I=(u+s)/60;return e.total_time=I.toFixed(2),e.fifty_percent_value=F(e,.5),e.hundred_percent_value=F(e,1),M(),I.toFixed(2)},F=(e,a)=>{const n=parseFloat(e.total_time)||0,o=e.salary/220,i=1+a;return o*n*i},M=()=>{let e=0,a=0;c.value.forEach(n=>{e+=n.fifty_percent_value||0,a+=n.hundred_percent_value||0}),C.value=e,T.value=a},H=(e,a=null)=>{const o=e.salary/220,i=o*8.75*1.5,u=o*8.75*2;a!==null&&(e.show=!a),e.show?(C.value-=e.fifty_percent_value||0,T.value-=e.hundred_percent_value||0,a!==null&&(e.show=a),e.check_in_time=null,e.leave_for_lunch_break=null,e.check_in_after_lunch_break=null,e.check_out_time=null,e.total_time=0,e.fifty_percent_value=0,e.hundred_percent_value=0,M()):(a!==null&&(e.show=a),e.check_in_time="07:00",e.leave_for_lunch_break="12:00",e.check_in_after_lunch_break="13:15",e.check_out_time="17:00",e.total_time=8.75,e.fifty_percent_value=i,e.hundred_percent_value=u,C.value+=i,T.value+=u,M()),a===null&&(e.show=!e.show)},O=Z(()=>({totalFiftyPercentValue:C.value,totalHundredPercentValue:T.value}));return(e,a)=>(x(),v(X,null,[h(r(G),{title:m.page.name},null,8,["title"]),h(Y,{page:m.page,page_options:m.page_options},{header:B(()=>[nt]),default:B(()=>[t("div",at,[t("div",st,[t("div",ot,[t("div",rt,[ct,t("label",it,[p(t("input",{type:"checkbox","onUpdate:modelValue":a[0]||(a[0]=n=>$.value=n),class:"sr-only peer"},null,512),[[U,$.value]]),lt,dt]),t("button",{class:"p-2 rounded-md bg-green-700 hover:bg-green-800 active:bg-green-900 text-white",onClick:L},"Resetar Tabela")])])])]),t("div",ut,[t("div",_t,[t("div",ht,[t("div",pt,[t("div",ft,[t("div",xt,[t("div",vt,[t("div",mt,[t("table",bt,[t("thead",gt,[t("tr",wt,[t("th",{scope:"col",class:"px-6 py-4 text-center print:hidden"},[E(" Mostrar "),t("span",{class:"print:hidden"},[t("button",{class:"text-green-700 hover:text-green-800 active:text-green-900 text-xs",onClick:q},"Alternar")])]),kt,yt,Ct,Tt,Vt,Et,Pt,t("th",{scope:"col",class:f(["px-6 py-4 text-center",{"opacity-50 print:hidden":!g.value}])},[E(" Valor 50% "),t("span",At,[p(t("input",{type:"checkbox",class:"focus:bg-green-700 focus:ring-green-700 text-green-700 border-neutral-500 rounded-sm","onUpdate:modelValue":a[1]||(a[1]=n=>g.value=n)},null,512),[[U,g.value]])])],2),t("th",{scope:"col",class:f(["px-6 py-4 text-center",{"opacity-50 print:hidden":!w.value}])},[E(" Valor 100% "),t("span",Nt,[p(t("input",{type:"checkbox",class:"focus:bg-green-700 focus:ring-green-700 text-green-700 border-neutral-500 rounded-sm","onUpdate:modelValue":a[2]||(a[2]=n=>w.value=n)},null,512),[[U,w.value]])])],2),$t])]),t("tbody",null,[c.value.length?(x(!0),v(X,{key:0},K(c.value,n=>{var o,i,u;return x(),v("tr",{class:f(["border-b transition duration-100 hover:bg-neutral-200 print:break-inside-avoid text-sm print:text-md",{"opacity-50 print:hidden":!n.show,hidden:!n.show&&!$.value}])},[t("td",Mt,[t("input",{type:"checkbox",class:"focus:bg-green-700 focus:ring-green-700 text-green-700 border-neutral-500 rounded-sm",value:n.show,onChange:s=>H(n),checked:n.show},null,40,St)]),t("td",Ut,l(n.name+" "+n.surname),1),t("td",Ft,l(r(k)(n.salary||0)),1),t("td",Ht,[t("button",{class:"absolute left-0 top-1/2 transform -translate-y-1/2 text-neutral-300 hover:text-neutral-500 active:text-neutral-700 ml-3",onClick:s=>y(n.check_in_time,"check_in_time")},[h(r(A),{class:"w-3 h-3"})],8,Ot),p(t("input",{type:"time",class:"focus:ring-green-700 simple-input pl-8",disabled:!n.show,"onUpdate:modelValue":s=>n.check_in_time=s},null,8,It),[[P,n.check_in_time]])]),t("td",Bt,[t("button",{class:"absolute left-0 top-1/2 transform -translate-y-1/2 text-neutral-300 hover:text-neutral-500 active:text-neutral-700 ml-3",onClick:s=>y(n.leave_for_lunch_break,"leave_for_lunch_break")},[h(r(A),{class:"w-3 h-3"})],8,Xt),p(t("input",{type:"time",class:"focus:ring-green-700 simple-input pl-8",disabled:!n.show,"onUpdate:modelValue":s=>n.leave_for_lunch_break=s},null,8,jt),[[P,n.leave_for_lunch_break]])]),t("td",Jt,[t("button",{class:"absolute left-0 top-1/2 transform -translate-y-1/2 text-neutral-300 hover:text-neutral-500 active:text-neutral-700 ml-3",onClick:s=>y(n.check_in_after_lunch_break,"check_in_after_lunch_break")},[h(r(A),{class:"w-3 h-3"})],8,Lt),p(t("input",{type:"time",class:"focus:ring-green-700 simple-input pl-8",disabled:!n.show,"onUpdate:modelValue":s=>n.check_in_after_lunch_break=s},null,8,qt),[[P,n.check_in_after_lunch_break]])]),t("td",Dt,[t("button",{class:"absolute left-0 top-1/2 transform -translate-y-1/2 text-neutral-300 hover:text-neutral-500 active:text-neutral-700 ml-3",onClick:s=>y(n.check_out_time,"check_out_time")},[h(r(A),{class:"w-3 h-3"})],8,Rt),p(t("input",{type:"time",class:"focus:ring-green-700 simple-input pl-8",disabled:!n.show,"onUpdate:modelValue":s=>n.check_out_time=s},null,8,zt),[[P,n.check_out_time]])]),t("td",Wt,l(z(n)),1),t("td",{class:f(["whitespace-nowrap py-1 text-center font-medium bg-neutral-50",{"opacity-50 print:hidden":!g.value}])},l(r(k)(n.fifty_percent_value||0)),3),t("td",{class:f(["whitespace-nowrap py-1 text-center font-medium bg-neutral-100",{"opacity-50 print:hidden":!w.value}])},l(r(k)(n.hundred_percent_value||0)),3),t("td",{class:"whitespace-nowrap py-1 text-center font-medium hover:text-green-600 active:text-green-700 cursor-pointer",title:"Clique para copiar PIX para área de transferência",onClick:s=>{var S;return(S=n.overtime_payment_method)!=null&&S.cod?R(n):null}},[t("span",Gt,[E(l((o=n.overtime_payment_method)!=null&&o.cod?n[n.overtime_payment_method.cod]:"-")+" ",1),(i=n.overtime_payment_method)!=null&&i.cod?(x(),Q(r(et),{key:0,class:"w-4 h-4 print:hidden"})):j("",!0)])],8,Zt),t("td",Kt,l(D(((u=n.overtime_payment_method)==null?void 0:u.cod)||"-")),1)],2)}),256)):j("",!0),c.value.length?(x(),v("tr",Qt,[Yt,te,ee,ne,t("td",{class:f(["whitespace-nowrap py-1 text-center font-medium",{"opacity-50 print:hidden":!g.value}])},l(r(k)(O.value.totalFiftyPercentValue||0)),3),t("td",{class:f(["whitespace-nowrap py-1 text-center font-medium",{"opacity-50 print:hidden":!w.value}])},l(r(k)(O.value.totalHundredPercentValue||0)),3),ae])):(x(),v("tr",se,re))])])])])])])])])])]),h(tt,{mode:["rollup","print_page"]})]),_:1},8,["page","page_options"])],64))}};export{pe as default};
