import{m as F,T as O,d as b,o as f,b as d,u as s,Z as q,w as h,a as e,h as C,e as E,s as r,B as V,f as _,t as v,v as i,F as k,g as R,i as D}from"./app-CvAlCVsm.js";import{_ as z}from"./AppLayout-PcgpBm_n.js";/* empty css                    */import{_ as c}from"./InputError-DxZmE3qE.js";import{c as w,a as U,b as P,d as N,e as u}from"./general-D_37hS-e.js";import{_ as J}from"./PrimaryButton-CMcNbFER.js";import{_ as M}from"./SecondaryButton-DmFe0qdl.js";import{r as L}from"./TrashIcon-CGRZQwyk.js";import{r as G}from"./PlusIcon-Egh1AfEM.js";const Z={class:"font-semibold text-xl text-gray-800 leading-tight"},H={class:"py-12"},K={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Q={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},W={class:"mb-8"},X=e("h3",{class:"text-lg font-semibold text-gray-900 border-b pb-2 mb-4"},"DADOS GERAIS",-1),Y={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ee={class:"md:col-span-2"},te=e("label",{class:"block text-sm font-medium text-gray-700"},"Tipo de Cliente",-1),se={class:"mt-2 flex items-center space-x-6"},oe={class:"inline-flex items-center"},ae=e("span",{class:"ml-2"},"Pessoa Física",-1),le={class:"inline-flex items-center"},ne=e("span",{class:"ml-2"},"Pessoa Jurídica",-1),de={for:"name",class:"block text-sm font-medium text-gray-700"},re=e("span",{class:"text-red-500"},"*",-1),ie={key:0},ce=e("label",{for:"trade_name",class:"block text-sm font-medium text-gray-700"},[_("Nome Fantasia "),e("span",{class:"text-red-500"},"*")],-1),me={for:"document",class:"block text-sm font-medium text-gray-700"},pe=e("span",{class:"text-red-500"},"*",-1),ue=e("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"E-mail",-1),_e={class:"mb-8"},ge=e("h3",{class:"text-lg font-semibold text-gray-900 border-b pb-2 mb-4"},"CONTATOS",-1),be={class:"space-y-4"},fe={class:"flex-grow"},he=["for"],xe=["onUpdate:modelValue","onInput","id"],ye=["onClick"],ve={class:"mb-8"},Ce=e("h3",{class:"text-lg font-semibold text-gray-900 border-b pb-2 mb-4"},"ENDEREÇO",-1),Ee={class:"grid grid-cols-1 md:grid-cols-6 gap-6"},Ve={class:"md:col-span-2"},ke=e("label",{for:"postal_code",class:"block text-sm font-medium text-gray-700"},"CEP",-1),we={class:"md:col-span-4"},Ue=e("label",{for:"address_street",class:"block text-sm font-medium text-gray-700"},"Rua / Logradouro",-1),Pe={class:"md:col-span-2"},Ne=e("label",{for:"address_number",class:"block text-sm font-medium text-gray-700"},"Número",-1),Se={class:"md:col-span-4"},Te=e("label",{for:"address_complement",class:"block text-sm font-medium text-gray-700"},"Complemento",-1),Ie={class:"md:col-span-3"},je=e("label",{for:"address_neighborhood",class:"block text-sm font-medium text-gray-700"},"Bairro",-1),Be={class:"md:col-span-2"},$e=e("label",{for:"address_city",class:"block text-sm font-medium text-gray-700"},"Cidade",-1),Ae={class:"md:col-span-1"},Fe=e("label",{for:"address_state",class:"block text-sm font-medium text-gray-700"},"Estado",-1),Oe=e("h3",{class:"text-lg font-semibold text-gray-900 border-b pb-2 mb-4"},"OBSERVAÇÕES",-1),qe={class:"mt-8 pt-5 border-t border-gray-200"},Re={class:"flex justify-end space-x-3"},Qe={__name:"Edit",props:{page:{type:Object,required:!1},client:{type:Object,required:!0}},setup(x){const n=x,g=F.useToast(),t=O({_method:"PUT",type:n.client.type,name:n.client.name,trade_name:n.client.trade_name,document:n.client.type==="fisica"?U(n.client.document):P(n.client.document),email:n.client.email,contacts:n.client.contacts&&n.client.contacts.length>0?n.client.contacts.map(l=>N(l)):[""],postal_code:w(n.client.postal_code),address_street:n.client.address_street,address_number:n.client.address_number,address_complement:n.client.address_complement,address_neighborhood:n.client.address_neighborhood,address_city:n.client.address_city,address_state:n.client.address_state,observations:n.client.observations}),S=()=>{t.contacts.push("")},T=l=>{t.contacts.length>1&&t.contacts.splice(l,1)},I=(l,o)=>{t.contacts[o]=N(l.target.value)},j=l=>{let o=u(l.target.value);o.length<=11?t.document=U(o):t.document=P(o)},B=l=>{let o=u(l.target.value);t.postal_code=w(o),t.postal_code.length===9&&$()},$=async()=>{let l=u(t.postal_code);if(l.length===8)try{const m=await(await fetch(`https://viacep.com.br/ws/${l}/json/`)).json();m.erro?g.error("CEP não encontrado.",{position:"top-right"}):(t.address_street=m.logradouro,t.address_neighborhood=m.bairro,t.address_city=m.localidade,t.address_state=m.uf,g.success("Endereço preenchido automaticamente!",{position:"top-right"}))}catch(o){console.error("Erro ao buscar CEP:",o),g.error("Erro ao consultar o serviço de CEP.",{position:"top-right"})}},A=()=>{const l={...t.data()};l.document=u(l.document),l.postal_code=u(l.postal_code),l.contacts=l.contacts.map(o=>u(o)).filter(Boolean),t.transform(()=>l).put(route("clients.update",n.client.id),{onSuccess:()=>{g.success("Cliente atualizado com sucesso!")},onError:o=>{console.error(o),g.error("Verifique os campos e tente novamente.")}})};return(l,o)=>{var m;return f(),b(k,null,[d(s(q),{title:"Editar "+((m=x.page)==null?void 0:m.singular_name)||"Cliente"},null,8,["title"]),d(z,{page:x.page},{header:h(()=>[e("h2",Z," Editar Cliente: "+v(x.client.name),1)]),default:h(()=>[e("div",H,[e("div",K,[e("div",Q,[e("form",{onSubmit:C(A,["prevent"]),class:"p-6"},[e("section",W,[X,e("div",Y,[e("div",ee,[te,e("div",se,[e("label",oe,[r(e("input",{type:"radio","onUpdate:modelValue":o[0]||(o[0]=a=>s(t).type=a),value:"fisica",class:"form-radio h-4 w-4 text-indigo-600"},null,512),[[V,s(t).type]]),ae]),e("label",le,[r(e("input",{type:"radio","onUpdate:modelValue":o[1]||(o[1]=a=>s(t).type=a),value:"juridica",class:"form-radio h-4 w-4 text-indigo-600"},null,512),[[V,s(t).type]]),ne])])]),e("div",null,[e("label",de,[_(v(s(t).type==="fisica"?"Nome Completo":"Razão Social")+" ",1),re]),r(e("input",{"onUpdate:modelValue":o[2]||(o[2]=a=>s(t).name=a),type:"text",id:"name",class:"simple-input mt-1",required:""},null,512),[[i,s(t).name]]),d(c,{class:"mt-2",message:s(t).errors.name},null,8,["message"])]),s(t).type==="juridica"?(f(),b("div",ie,[ce,r(e("input",{"onUpdate:modelValue":o[3]||(o[3]=a=>s(t).trade_name=a),type:"text",id:"trade_name",class:"simple-input mt-1",required:""},null,512),[[i,s(t).trade_name]]),d(c,{class:"mt-2",message:s(t).errors.trade_name},null,8,["message"])])):E("",!0),e("div",null,[e("label",me,[_(v(s(t).type==="fisica"?"CPF":"CNPJ")+" ",1),pe]),r(e("input",{"onUpdate:modelValue":o[4]||(o[4]=a=>s(t).document=a),onInput:j,type:"text",id:"document",class:"simple-input mt-1",required:""},null,544),[[i,s(t).document]]),d(c,{class:"mt-2",message:s(t).errors.document},null,8,["message"])]),e("div",null,[ue,r(e("input",{"onUpdate:modelValue":o[5]||(o[5]=a=>s(t).email=a),type:"email",id:"email",class:"simple-input mt-1"},null,512),[[i,s(t).email]]),d(c,{class:"mt-2",message:s(t).errors.email},null,8,["message"])])])]),e("section",_e,[ge,e("div",be,[(f(!0),b(k,null,R(s(t).contacts,(a,p)=>(f(),b("div",{key:p,class:"flex items-center space-x-3"},[e("div",fe,[e("label",{for:"contact-"+p,class:"sr-only"},"Contato "+v(p+1),9,he),r(e("input",{"onUpdate:modelValue":y=>s(t).contacts[p]=y,onInput:y=>I(y,p),type:"text",id:"contact-"+p,class:"simple-input w-full",placeholder:"Telefone ou outro contato"},null,40,xe),[[i,s(t).contacts[p]]])]),s(t).contacts.length>1?(f(),b("button",{key:0,onClick:C(y=>T(p),["prevent"]),type:"button",class:"text-red-500 hover:text-red-700 p-1 rounded-full bg-red-100"},[d(s(L),{class:"w-5 h-5"})],8,ye)):E("",!0)]))),128))]),e("button",{onClick:C(S,["prevent"]),type:"button",class:"mt-4 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 flex items-center text-sm"},[d(s(G),{class:"w-5 h-5 mr-1"}),_(" Adicionar Contato ")])]),e("section",ve,[Ce,e("div",Ee,[e("div",Ve,[ke,r(e("input",{"onUpdate:modelValue":o[6]||(o[6]=a=>s(t).postal_code=a),onInput:B,type:"text",id:"postal_code",class:"simple-input mt-1"},null,544),[[i,s(t).postal_code]]),d(c,{class:"mt-2",message:s(t).errors.postal_code},null,8,["message"])]),e("div",we,[Ue,r(e("input",{"onUpdate:modelValue":o[7]||(o[7]=a=>s(t).address_street=a),type:"text",id:"address_street",class:"simple-input mt-1"},null,512),[[i,s(t).address_street]]),d(c,{class:"mt-2",message:s(t).errors.address_street},null,8,["message"])]),e("div",Pe,[Ne,r(e("input",{"onUpdate:modelValue":o[8]||(o[8]=a=>s(t).address_number=a),type:"text",id:"address_number",class:"simple-input mt-1"},null,512),[[i,s(t).address_number]]),d(c,{class:"mt-2",message:s(t).errors.address_number},null,8,["message"])]),e("div",Se,[Te,r(e("input",{"onUpdate:modelValue":o[9]||(o[9]=a=>s(t).address_complement=a),type:"text",id:"address_complement",class:"simple-input mt-1"},null,512),[[i,s(t).address_complement]])]),e("div",Ie,[je,r(e("input",{"onUpdate:modelValue":o[10]||(o[10]=a=>s(t).address_neighborhood=a),type:"text",id:"address_neighborhood",class:"simple-input mt-1"},null,512),[[i,s(t).address_neighborhood]]),d(c,{class:"mt-2",message:s(t).errors.address_neighborhood},null,8,["message"])]),e("div",Be,[$e,r(e("input",{"onUpdate:modelValue":o[11]||(o[11]=a=>s(t).address_city=a),type:"text",id:"address_city",class:"simple-input mt-1"},null,512),[[i,s(t).address_city]]),d(c,{class:"mt-2",message:s(t).errors.address_city},null,8,["message"])]),e("div",Ae,[Fe,r(e("input",{"onUpdate:modelValue":o[12]||(o[12]=a=>s(t).address_state=a),type:"text",id:"address_state",class:"simple-input mt-1",maxlength:"2"},null,512),[[i,s(t).address_state]]),d(c,{class:"mt-2",message:s(t).errors.address_state},null,8,["message"])])])]),e("section",null,[Oe,r(e("textarea",{"onUpdate:modelValue":o[13]||(o[13]=a=>s(t).observations=a),id:"observations",rows:"4",class:"simple-input mt-1",placeholder:"Informações adicionais sobre o cliente..."},null,512),[[i,s(t).observations]]),d(c,{class:"mt-2",message:s(t).errors.observations},null,8,["message"])]),e("div",qe,[e("div",Re,[d(s(D),{href:l.route("clients.index")},{default:h(()=>[d(M,{type:"button"},{default:h(()=>[_(" Cancelar ")]),_:1})]),_:1},8,["href"]),d(J,{type:"submit",disabled:s(t).processing},{default:h(()=>[_(" Atualizar Cliente")]),_:1},8,["disabled"])])])],32)])])])]),_:1},8,["page"])],64)}}};export{Qe as default};
