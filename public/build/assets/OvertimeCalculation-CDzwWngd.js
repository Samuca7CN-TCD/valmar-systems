import{o as x,e as v,a as t,y as Z,d as _,l as G,b as h,u as r,Z as K,w as B,t as c,q as p,s as F,f as E,n as f,F as X,g as Q,v as P,c as W,h as j}from"./app-wIlip3pR.js";import{_ as Y}from"./AppLayout-BbWcPMzy.js";import{t as w}from"./general-B4ZTqOfr.js";import{_ as tt}from"./ExtraOptionsButton-IO_FbokD.js";import{r as et}from"./DocumentDuplicateIcon-DGsBsElC.js";import"./PrinterIcon-Bt7yR5Wr.js";function N(m,b){return x(),v("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7.5 7.5 3m0 0L12 7.5M7.5 3v13.5m13.5 0L16.5 21m0 0L12 16.5m4.5 4.5V7.5"})])}const at={class:"font-semibold text-xl text-gray-800 leading-tight"},nt={class:"pt-6 print:hidden print:pt-0"},st={class:"w-fit max-w-7xl mx-auto sm:px-6 lg:px-8 print:w-full"},ot={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-5"},rt={class:"flex flex-col items-center justify-center align-middle gap-5"},ct=t("h2",{class:"text-green-700 font-extrabold text-2xl"},"Controles da Tabela",-1),it={class:"inline-flex items-center cursor-pointer"},lt=t("div",{class:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-green-600"},null,-1),dt=t("span",{class:"ms-3 text-sm font-medium text-gray-900"},"Mostrar funcionário omitidos",-1),ut={class:"py-6 print:py-6"},_t={class:"max-w-full mx-auto print:max-w-full"},ht={class:"px-0 print:px-0"},pt={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg print:shadow-none"},ft={class:"flex flex-col"},xt={class:"overflow-x-auto sm:-mx-6 lg:-mx-8"},mt={class:"inline-block min-w-full sm:px-6 lg:px-8"},vt={class:"overflow-hidden"},bt={class:"min-w-full text-left text-sm font-light"},gt={class:"border-b font-medium"},kt={class:"bg-neutral-200"},wt=t("th",{scope:"col",class:"px-6 py-4 text-center"},"Funcionário",-1),yt=t("th",{scope:"col",class:"px-6 py-4 text-center"},"Salário",-1),Ct=t("th",{scope:"col",class:"px-6 py-4 text-center print:hidden",title:"Início do expediente"}," H. Entrada",-1),Tt=t("th",{scope:"col",class:"px-6 py-4 text-center print:hidden",title:"Saída para o horário de Almoço"},"S. Almoço",-1),Vt=t("th",{scope:"col",class:"px-6 py-4 text-center print:hidden",title:"Entrada da volta do horário de Almoço"},"E. Almoço",-1),Et=t("th",{scope:"col",class:"px-6 py-4 text-center print:hidden",title:"Saída do expediente"},"H. Saída",-1),Pt=t("th",{scope:"col",class:"px-6 py-4 text-center",title:"Total de horas do Expediente"},"Total Horas",-1),Nt={class:"print:hidden"},$t={class:"print:hidden"},At=t("th",{scope:"col",class:"px-6 py-4 text-center",colspan:"2"}," Pix",-1),Mt={class:"whitespace-nowrap py-1 text-center font-medium print:hidden"},Ut=["value","onChange","checked"],Ft={class:"py-4 text-center font-medium"},St={class:"whitespace-nowrap py-1 text-center font-medium"},Ht={class:"whitespace-nowrap py-1 text-center font-medium print:hidden relative"},It=["onClick"],Ot=["disabled","onUpdate:modelValue"],Bt={class:"whitespace-nowrap py-1 text-center font-medium print:hidden relative"},Xt=["onClick"],jt=["disabled","onUpdate:modelValue"],Jt={class:"whitespace-nowrap py-1 text-center font-medium print:hidden relative"},Lt=["onClick"],qt=["disabled","onUpdate:modelValue"],Dt={class:"whitespace-nowrap py-1 text-center font-medium print:hidden relative"},Rt=["onClick"],zt=["disabled","onUpdate:modelValue"],Zt={class:"whitespace-nowrap py-1 text-center font-medium"},Gt=["onClick"],Kt={class:"flex flex-row justify-center items-center align-middle gap-3"},Qt={class:"whitespace-nowrap py-1 text-center font-medium uppercase"},Wt={key:1,class:"border-b transition duration-300 ease-in-out print:break-inside-avoid text-sm print:text-md bg-neutral-200"},Yt=t("td",{class:"print:hidden"},null,-1),te=t("td",{colspan:"2"},null,-1),ee=t("td",{class:"print:hidden",colspan:"4"},null,-1),ae=t("td",{class:"whitespace-nowrap py-1 font-medium text-center"}," Total ",-1),ne=t("td",{class:"whitespace-nowrap py-1 text-center font-medium",colspan:"2"},null,-1),se={key:2,class:"transition duration-300 ease-in-out hover:bg-neutral-100 print:break-inside-avoid"},oe=t("td",{class:"whitespace-nowrap px-6 py-1 text-center",colspan:"9"},"Não há funcionários cadastradas no momento!",-1),re=[oe],he={__name:"OvertimeCalculation",props:{page:Object,page_options:{type:Array,default:null},employees_list:Array,account_types_list:Array,payment_methods_list:Array,banks_list:Array,total_fifty_percent_value:Number,total_hundred_percent_value:Number},setup(m){const b=m,l=Z.useToast(),d=_(JSON.parse(JSON.stringify(b.employees_list))),J=JSON.parse(JSON.stringify(b.employees_list)),$=_(!1),g=_(!0),k=_(!0),A=_(!1),L=()=>{l.clear(),d.value=J,l.success("Tabela resetada com sucesso!")},q=()=>{d.value.forEach(e=>H(e,$.value)),$.value=!$.value},D=e=>{switch(e){case"pix_email":return"E-mail";case"pix_cpf":return"Cpf";case"pix_phone_number":return"Telefone";case"pix_token":return"Token"}return"-"},R=e=>{let n=e[e.overtime_payment_method.cod];if(l.clear(),navigator.clipboard&&navigator.clipboard.writeText)return navigator.clipboard.writeText(n).then(()=>{l.success(`PIX de ${e.name} copiado para a área de transferência`),console.log("Texto copiado para a área de transferência")}).catch(a=>{l.error(`Não foi possível copiar o PIX de ${e.name} para a área de transferência`),console.error("Erro ao copiar texto para a área de transferência",a)});{const a=document.createElement("textarea");a.value=n,document.body.appendChild(a),a.focus(),a.select();try{document.execCommand("copy"),l.success(`PIX de ${e.name} copiado para a área de transferência`),console.log("Texto copiado para a área de transferência")}catch(o){l.error(`Não foi possível copiar o PIX de ${e.name} para a área de transferência`),console.error("Erro ao copiar texto para a área de transferência",o)}document.body.removeChild(a)}},y=(e,n)=>{d.value.forEach(a=>{a[n]=e})},C=_(b.total_fifty_percent_value),T=_(b.total_hundred_percent_value),V=e=>{const[n,a]=e.split(":").map(Number);return n*60+a},z=e=>{if(!e.check_in_time||!e.leave_for_lunch_break||!e.check_in_after_lunch_break||!e.check_out_time)return e.total_time=0,e.fifty_percent_value=0,e.hundred_percent_value=0,0;const n=V(e.check_in_time),a=V(e.leave_for_lunch_break),o=V(e.check_in_after_lunch_break),i=V(e.check_out_time),u=a-n,s=i-o,O=(u+s)/60;return e.total_time=O.toFixed(2),e.fifty_percent_value=S(e,.5),e.hundred_percent_value=S(e,1),M(),O.toFixed(2)},S=(e,n)=>{const a=parseFloat(e.total_time)||0,o=e.salary/220,i=1+n;return o*a*i},M=()=>{let e=0,n=0;d.value.forEach(a=>{e+=a.fifty_percent_value||0,n+=a.hundred_percent_value||0}),C.value=e,T.value=n},H=(e,n=null)=>{const o=e.salary/220,i=o*8.75*1.5,u=o*8.75*2;n&&(e.show=!n),e.show?(C.value-=e.fifty_percent_value||0,T.value-=e.hundred_percent_value||0,e.show=!1,e.check_in_time=null,e.leave_for_lunch_break=null,e.check_in_after_lunch_break=null,e.check_out_time=null,e.total_time=0,e.fifty_percent_value=0,e.hundred_percent_value=0,M()):(e.show=!0,e.check_in_time="07:00",e.leave_for_lunch_break="12:00",e.check_in_after_lunch_break="13:15",e.check_out_time="17:00",e.total_time=8.75,e.fifty_percent_value=i,e.hundred_percent_value=u,C.value+=i,T.value+=u,M())},I=G(()=>({totalFiftyPercentValue:C.value,totalHundredPercentValue:T.value}));return(e,n)=>(x(),v(X,null,[h(r(K),{title:m.page.name},null,8,["title"]),h(Y,{page:m.page,page_options:m.page_options},{header:B(()=>[t("h2",at,c(m.page.name),1)]),default:B(()=>[t("div",nt,[t("div",st,[t("div",ot,[t("div",rt,[ct,t("label",it,[p(t("input",{type:"checkbox","onUpdate:modelValue":n[0]||(n[0]=a=>A.value=a),class:"sr-only peer"},null,512),[[F,A.value]]),lt,dt]),t("button",{class:"p-2 rounded-md bg-green-700 hover:bg-green-800 active:bg-green-900 text-white",onClick:L},"Resetar Tabela")])])])]),t("div",ut,[t("div",_t,[t("div",ht,[t("div",pt,[t("div",ft,[t("div",xt,[t("div",mt,[t("div",vt,[t("table",bt,[t("thead",gt,[t("tr",kt,[t("th",{scope:"col",class:"px-6 py-4 text-center print:hidden"},[E(" Mostrar "),t("span",{class:"print:hidden"},[t("button",{class:"text-green-700 hover:text-green-800 active:text-green-900 text-xs",onClick:q},"Alternar")])]),wt,yt,Ct,Tt,Vt,Et,Pt,t("th",{scope:"col",class:f(["px-6 py-4 text-center",{"opacity-50 print:hidden":!g.value}])},[E(" Valor 50% "),t("span",Nt,[p(t("input",{type:"checkbox",class:"focus:bg-green-700 focus:ring-green-700 text-green-700 border-neutral-500 rounded-sm","onUpdate:modelValue":n[1]||(n[1]=a=>g.value=a)},null,512),[[F,g.value]])])],2),t("th",{scope:"col",class:f(["px-6 py-4 text-center",{"opacity-50 print:hidden":!k.value}])},[E(" Valor 100% "),t("span",$t,[p(t("input",{type:"checkbox",class:"focus:bg-green-700 focus:ring-green-700 text-green-700 border-neutral-500 rounded-sm","onUpdate:modelValue":n[2]||(n[2]=a=>k.value=a)},null,512),[[F,k.value]])])],2),At])]),t("tbody",null,[d.value.length?(x(!0),v(X,{key:0},Q(d.value,a=>{var o,i,u;return x(),v("tr",{class:f(["border-b transition duration-100 hover:bg-neutral-200 print:break-inside-avoid text-sm print:text-md",{"opacity-50 print:hidden":!a.show,hidden:!a.show&&!A.value}])},[t("td",Mt,[t("input",{type:"checkbox",class:"focus:bg-green-700 focus:ring-green-700 text-green-700 border-neutral-500 rounded-sm",value:a.show,onChange:s=>H(a),checked:a.show},null,40,Ut)]),t("td",Ft,c(a.name+" "+a.surname),1),t("td",St,c(r(w)(a.salary||0)),1),t("td",Ht,[t("button",{class:"absolute left-0 top-1/2 transform -translate-y-1/2 text-neutral-300 hover:text-neutral-500 active:text-neutral-700 ml-3",onClick:s=>y(a.check_in_time,"check_in_time")},[h(r(N),{class:"w-3 h-3"})],8,It),p(t("input",{type:"time",class:"focus:ring-green-700 simple-input pl-8",disabled:!a.show,"onUpdate:modelValue":s=>a.check_in_time=s},null,8,Ot),[[P,a.check_in_time]])]),t("td",Bt,[t("button",{class:"absolute left-0 top-1/2 transform -translate-y-1/2 text-neutral-300 hover:text-neutral-500 active:text-neutral-700 ml-3",onClick:s=>y(a.leave_for_lunch_break,"leave_for_lunch_break")},[h(r(N),{class:"w-3 h-3"})],8,Xt),p(t("input",{type:"time",class:"focus:ring-green-700 simple-input pl-8",disabled:!a.show,"onUpdate:modelValue":s=>a.leave_for_lunch_break=s},null,8,jt),[[P,a.leave_for_lunch_break]])]),t("td",Jt,[t("button",{class:"absolute left-0 top-1/2 transform -translate-y-1/2 text-neutral-300 hover:text-neutral-500 active:text-neutral-700 ml-3",onClick:s=>y(a.check_in_after_lunch_break,"check_in_after_lunch_break")},[h(r(N),{class:"w-3 h-3"})],8,Lt),p(t("input",{type:"time",class:"focus:ring-green-700 simple-input pl-8",disabled:!a.show,"onUpdate:modelValue":s=>a.check_in_after_lunch_break=s},null,8,qt),[[P,a.check_in_after_lunch_break]])]),t("td",Dt,[t("button",{class:"absolute left-0 top-1/2 transform -translate-y-1/2 text-neutral-300 hover:text-neutral-500 active:text-neutral-700 ml-3",onClick:s=>y(a.check_out_time,"check_out_time")},[h(r(N),{class:"w-3 h-3"})],8,Rt),p(t("input",{type:"time",class:"focus:ring-green-700 simple-input pl-8",disabled:!a.show,"onUpdate:modelValue":s=>a.check_out_time=s},null,8,zt),[[P,a.check_out_time]])]),t("td",Zt,c(z(a)),1),t("td",{class:f(["whitespace-nowrap py-1 text-center font-medium bg-neutral-50",{"opacity-50 print:hidden":!g.value}])},c(r(w)(a.fifty_percent_value||0)),3),t("td",{class:f(["whitespace-nowrap py-1 text-center font-medium bg-neutral-100",{"opacity-50 print:hidden":!k.value}])},c(r(w)(a.hundred_percent_value||0)),3),t("td",{class:"whitespace-nowrap py-1 text-center font-medium hover:text-green-600 active:text-green-700 cursor-pointer",title:"Clique para copiar PIX para área de transferência",onClick:s=>{var U;return(U=a.overtime_payment_method)!=null&&U.cod?R(a):null}},[t("span",Kt,[E(c((o=a.overtime_payment_method)!=null&&o.cod?a[a.overtime_payment_method.cod]:"-")+" ",1),(i=a.overtime_payment_method)!=null&&i.cod?(x(),W(r(et),{key:0,class:"w-4 h-4 print:hidden"})):j("",!0)])],8,Gt),t("td",Qt,c(D(((u=a.overtime_payment_method)==null?void 0:u.cod)||"-")),1)],2)}),256)):j("",!0),d.value.length?(x(),v("tr",Wt,[Yt,te,ee,ae,t("td",{class:f(["whitespace-nowrap py-1 text-center font-medium",{"opacity-50 print:hidden":!g.value}])},c(r(w)(I.value.totalFiftyPercentValue||0)),3),t("td",{class:f(["whitespace-nowrap py-1 text-center font-medium",{"opacity-50 print:hidden":!k.value}])},c(r(w)(I.value.totalHundredPercentValue||0)),3),ne])):(x(),v("tr",se,re))])])])])])])])])])]),h(tt,{mode:["rollup","print_page"]})]),_:1},8,["page","page_options"])],64))}};export{he as default};
